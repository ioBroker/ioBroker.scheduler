"use strict";(self.webpackChunkiobroker_vis_2_widgets_scheduler=self.webpackChunkiobroker_vis_2_widgets_scheduler||[]).push([["src_components_DayOfWeekPanel_js-src_components_IntervalsContainer_js-src_assets_img_day-nigh-b81739"],{69438:function(t,e,i){var n=i(15671),s=i(43144),r=i(60136),a=i(27277),o=i(4819),l=i(12181),h=i(94427),d=i(80184),p=["Su","Mo","Tu","We","Th","Fr","Sa"],c=[1,2,3,4,5,6,0],u=[0,1,2,3,4,5,6],f=function(t){(0,r.Z)(i,t);var e=(0,a.Z)(i);function i(){return(0,n.Z)(this,i),e.apply(this,arguments)}return(0,s.Z)(i,[{key:"render",value:function(){var t=this,e=this.props.classes,i=e.flow,n=e.label,s="monday"===this.props.firstDayOfWeek?c:u;return(0,d.jsxs)(h.FormControl,{component:"fieldset",style:{marginRight:12},children:[s.map((function(e){return(0,d.jsx)(h.FormControlLabel,{style:{marginLeft:6},control:(0,d.jsx)(h.Checkbox,{checked:t.props.dow.includes(e),color:"primary",className:i,onChange:function(i){return t.props.onChange(e,i.target.checked)}}),label:t.props.t(p[e]),className:n},e)})),this.props.holidayVisible?(0,d.jsx)(h.FormControlLabel,{style:{marginLeft:6},control:(0,d.jsx)(h.Checkbox,{checked:!!this.props.holiday,color:"primary",className:i,onChange:function(e){return t.props.onChange("holiday",e.target.checked)}}),label:this.props.t("Holiday"),className:n}):null]})}}]),i}(o.Component);e.Z=(0,l.withStyles)((function(){return{flow:{width:26,height:28,maxHeight:28,minHeight:28,padding:0,display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",position:"relative"},label:{color:function(t){return t.theme.palette.text.primary},marginLeft:0,marginRight:12}}}))(f)},68143:function(t,e,i){i.d(e,{Z:function(){return k}});var n=i(15671),s=i(43144),r=i(60136),a=i(27277),o=i(4819),l=i.n(o),h=i(12181),d=i.p+"static/media/day-night.d6f09cbf18746b70d451.jpg",p=i(80184),c=function(t){(0,r.Z)(i,t);var e=(0,a.Z)(i);function i(){var t;(0,n.Z)(this,i);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))).onSlide=function(e){t.props.onChange&&t.props.onChange(e)},t}return(0,s.Z)(i,[{key:"render",value:function(){var t=this,e=this.props.sections,i=this.props.classes,n=i.dayNightCont,s=i.dayNightSlide,r=i.dayNightQuarter,a=i.dn,o=1===e?0:78,l=100/e,h=Array(e).fill().map((function(e,i){return(0,p.jsx)("div",{className:r,onClick:function(){return t.onSlide(i)}},i)}));return(0,p.jsx)("div",{className:n,style:{height:o},children:(0,p.jsxs)("div",{children:[(0,p.jsx)("img",{src:d,alt:"day-night",id:"".concat(this.props.id,"-day-night")}),(0,p.jsxs)("div",{className:a,children:[h,(0,p.jsx)("div",{className:s,style:{maxWidth:"".concat(l,"%"),width:"".concat(l,"%"),left:"calc(".concat(this.props.quarterId*l,"% - 5px)")}})]})]})})}}]),i}(o.Component),u=(0,h.withStyles)({dayNightCont:{position:"relative",width:"100%",display:"flex",justifyContent:"center",overflow:"hidden",transition:"height 300ms ease-out","&>div":{position:"relative"},"&>div>.day_night":{width:"100%",maxWidth:550,maxHeight:90},"&>div>img":{width:"100%",maxWidth:550,height:"auto",maxHeight:90}},dayNightQuarter:{display:"flex",width:"100%"},dayNightSlide:{display:"flex",width:"100%",height:"calc(100% - 9px)",position:"absolute",border:"6px solid #FFF",marginTop:-3,transition:"all 400ms ease-out","&::before":{content:'""',position:"absolute",left:"calc(-200% - 5px)",top:-5,height:"calc(100% + 12px)",width:"200%",pointerEvents:"none",background:"linear-gradient(to left,  rgba(255,255,255,1) 0%,rgba(255,255,255,0) 99%,rgba(255,255,255,0) 100%)",filter:"progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#00ffffff',GradientType=0 )"},"&::after":{content:'""',position:"absolute",right:"calc(-200% - 5px)",top:-5,height:"calc(100% + 12px)",width:"200%",pointerEvents:"none",background:"linear-gradient(to right,  rgba(255,255,255,1) 0%,rgba(255,255,255,0) 99%,rgba(255,255,255,0) 100%)",filter:"progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#00ffffff',GradientType=0 )"}},dn:{width:"100%",maxWidth:550,maxHeight:90,height:"100%",position:"absolute",top:0,left:0,display:"flex"}})(c),f=i(1413),m=i(94427),g=i(39044),v=(0,h.makeStyles)({root:function(t){return{color:t.theme.palette.primary.light,borderRadius:0,transition:"all 100ms ease-out",position:"relative","&&":{width:"".concat(t.intervalsWidth,"px"),padding:"0",height:"calc(100% - 90px)"}}},thumb:function(t){return{left:"50%",width:0,height:0,display:"onoff"===t.type?"none":"flex"}},active:{backgroundColor:"transparent",width:0,height:0},valueLabel:function(t){return{position:"relative",left:"unset",right:"unset",textAlign:"center",transform:"none !important",background:"transparent",userSelect:"none","& *":{userSelect:"none",background:"transparent",fontWeight:100,color:t.theme.palette.text.primary,fontSize:t.fontSize?"".concat(t.fontSize,"px"):"1.0rem",transition:"all 100ms ease-out"}}},valueLabelCircle:{background:"transparent"},track:{transition:"all 100ms ease-out",borderRadius:4,"&&":{width:"calc(100% - 8px)"}},rail:function(t){return{transition:"all 100ms ease-out",borderRadius:4,height:"calc(100% + 5px)",marginTop:-5,backgroundColor:t.theme.palette.primary.light,"&&":{width:"calc(100% - 5px)",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px"}}}});function x(t){var e=(x.canvas||(x.canvas=document.createElement("canvas"))).getContext("2d");return e.font="normal 1rem Roboto, Helvetica, Arial, sans-serif",e.measureText(t).width}var y=function(t){var e=(0,f.Z)({},t),i=e.intervalsWidth;delete e.intervalsWidth,delete e.type,delete e.theme;var n,s=x(t.valueLabelFormat);return s>i&&(n=Math.floor(i/s*13)),(0,p.jsx)(m.Slider,(0,f.Z)({id:t.id,classes:v({intervalsWidth:t.intervalsWidth,type:t.type,theme:t.theme,fontSize:n,textWidth:s})},e))},w=function(t){(0,r.Z)(i,t);var e=(0,a.Z)(i);function i(t){var s;return(0,n.Z)(this,i),(s=e.call(this,t)).handleSliderChange=function(t,e){t.shiftKey||s.on("data",e)},s.handleSelected=function(t){t.shiftKey||s.on("selected",!s.props.selected)},s.on=function(t,e){return s.props.on&&s.props.on(t,e,s.props.i)},s.getLabel=function(){var t=s.props,e=t.step,i=t.i*e;return[parseInt(i),"0".concat(i%1*60).slice(-2)]},s.state={intervalsWidth:t.intervalsWidth},s.installed=!1,s}return(0,s.Z)(i,[{key:"componentDidMount",value:function(){this.installHandlers()}},{key:"componentWillUnmount",value:function(){var t=window.document.getElementById("slider_".concat(this.props.i,"_").concat(this.props.id));t&&(t.onmousemove=null)}},{key:"installHandlers",value:function(){var t=window.document.getElementById("slider_".concat(this.props.i,"_").concat(this.props.id));t&&!this.installed&&(this.installed=!0,t._interval=this,t.onmousemove=function(t){var e;if((t.buttons||null!==(e=t.touches)&&void 0!==e&&e.length)&&t.shiftKey){var i,n,s=this._interval,r=this.getBoundingClientRect().height;n=null!==(i=t.touches)&&void 0!==i&&i.length?t.touches[0].clientY-this.getBoundingClientRect().top:t.clientY-this.getBoundingClientRect().top;var a,o=s.getMinMax(),l=o.min,h=o.max;switch(s.props.type){case"temperature":a=n/r,a=l+Math.round((h-l)*(1-a)*2)/2,a=Math.min(h,Math.max(l,a));break;case"onoff":a=Math.round(n/r*100)<50;break;case"custom":a=n/r,a=l+Math.round((h-l)*(1-a)),a=Math.min(h,Math.max(l,a));break;default:a=100-(a=Math.round(n/r*100)),a=Math.min(100,Math.max(0,a))}s.props.on("data",a,s.props.i)}})}},{key:"componentDidUpdate",value:function(t){this.installHandlers(),t.intervalsWidth!==this.props.intervalsWidth&&this.setState({intervalsWidth:this.props.intervalsWidth})}},{key:"getPostfix",value:function(t){switch(this.props.type){case"onoff":return t?(0,p.jsx)("span",{style:this.props.theme.palette.text.success,children:this.props.onText}):(0,p.jsx)("span",{style:this.props.theme.palette.text.danger,children:this.props.offText});case"custom":return this.props.minMax.marks&&void 0!==this.props.minMax.marks[t]?this.props.minMax.marks[t].toString():this.props.minMax.unit?t.toString()+this.props.minMax.unit:t.toString();default:return t.toString()+this.props.minMax.unit}}},{key:"getMinMax",value:function(){return"custom"===this.props.type?this.props.minMax:g[this.props.type]}},{key:"render",value:function(){var t=this,e=this.props,i=e.value,n=e.i,s=e.selected,r=e.theme,a=e.type,o=this.state.intervalsWidth,l=this.props.classes,h=l.pretty,d=l.prettyLabel,c=l.prettyTime,u=l.active,f=l.prettySecs;if(n<0)return"";var g=this.getMinMax(),v=g.min,x=g.max,w=g.step;console.log("min",v,"max",x,"step",w);var b=this.getLabel(),S=i||0,W="onoff"===a?this.getPostfix(S||0):"",C="onoff"!==a?this.getPostfix(S||0):"";return(0,p.jsx)(m.Tooltip,{title:this.props.t('Press "shift" and move mouse to change more than one slider'),classes:{popper:this.props.tooltip},children:(0,p.jsxs)("span",{className:h,children:[(0,p.jsx)("span",{className:d,children:W}),(0,p.jsx)(y,{ref:this.ref,theme:r,intervalsWidth:o,type:a,orientation:"vertical","aria-label":"pretty slider",value:S,valueLabelFormat:C,min:v,max:x,step:w||1,selected:s,onChange:this.handleSliderChange,valueLabelDisplay:"on",id:"slider_".concat(this.props.i,"_").concat(this.props.id)},n),(0,p.jsxs)("div",{className:"".concat(c," ").concat(s?u:""),onClick:this.handleSelected,onMouseMove:function(e){e.shiftKey&&e.buttons&&t.on("selected",window.myselectMode)},onMouseDown:function(e){e.shiftKey&&(window.myselectMode=!t.props.selected,t.on("selected",!t.props.selected))},style:{userSelect:"none"},children:[(0,p.jsx)("span",{style:{color:this.props.theme.palette.text.primary},children:b[0]}),(0,p.jsx)("span",{className:f,children:b[1]})]})]})})}}]),i}(o.Component),b=(0,h.withStyles)((function(){return{pretty:{position:"relative",height:"100%",display:"flex",flexDirection:"column",width:function(t){return t.intervalsWidth}},prettyLabel:{color:"#6c7a93",fontWeight:700,fontSize:".9rem",height:30,width:"calc(100% - 5px)",textAlign:"center"},prettyTime:{position:"absolute",fontSize:"0.9rem",fontWeight:700,bottom:27,width:"calc(100% - 5px)",borderRadius:"4px",height:28,maxHeight:28,minHeight:28,display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},active:{backgroundColor:function(t){return t.theme.palette.primary.light},color:"#FFF"},prettySecs:{fontSize:"0.6rem",fontWeight:100,color:function(t){return t.theme.palette.text.primary}},tooltip:{pointerEvents:"none"}}}))(w),S=function(t){(0,r.Z)(i,t);var e=(0,a.Z)(i);function i(t){var s;return(0,n.Z)(this,i),(s=e.call(this,t)).timeInterval=null,s.setSlideInterval=null,s.getNumberOfSectionsByRange=function(t){if(s.state.intervalsWidth>=720)return.25===t?4:.5===t?2:1;switch(t){case.25:return 16;case.5:return 8;case 1:return 4;case 2:return 3;case 4:return 1;default:return 2}},s.getCountByRange=function(t,e){if((e=e||s.state.intervalsWidth)>=720)return.5===t||.25===t?24:i.getMaxByRange(t);switch(t){case.25:case.5:case 1:case 4:return 6;default:return 4}},s.setSlideId=function(t){s.setState({slideId:parseInt(t)})},s.onChange=function(t,e,i){var n=s.state.selected,r=JSON.parse(JSON.stringify(s.state));if("selected"===t)r[t][i]=e,s.setState(r);else if("data"===t){var a=JSON.parse(JSON.stringify(s.props.data)),o=n[i];o||s.setState({selected:[]}),o&&0!==n.filter((function(t){return t})).length?a.forEach((function(t,i){n[i]&&(a[i]=e)})):a[i]=e,s.props.onChange(a)}},s.state={slideId:0,selected:[],intervalsWidth:t.intervalsWidth,key:parseInt(Date.now()+1e3*Math.random()),currentTime:new Date},s.onText=t.t("on"),s.offText=t.t("off"),s}return(0,s.Z)(i,[{key:"componentDidMount",value:function(){var t=this;this.setSlideOfTime(),this.timeInterval=setInterval((function(){return t.setState({currentTime:new Date})}),12e4),this.setSlideInterval=setInterval((function(){return t.setSlideOfTime()}),12e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timeInterval),this.timeInterval=null,clearInterval(this.setSlideInterval),this.setSlideInterval=null}},{key:"componentDidUpdate",value:function(t){t.range!==this.props.range&&(this.setState({slideId:0}),this.setSlideOfTime()),this.props.intervalsWidth&&t.intervalsWidth!==this.props.intervalsWidth&&this.setState({intervalsWidth:this.props.intervalsWidth,key:parseInt(Date.now()+1e3*Math.random()),slideId:this.getSlideOfTime(t.intervalsWidth)})}},{key:"getSlide",value:function(){var t=this,e=this.state,n=e.intervalsWidth,s=e.slideId,r=e.selected,a=e.key,o=this.props,l=o.type,h=o.theme,d=o.range,c=o.data,u=o.classes,f=o.minMax,m=this.getCountByRange(d);if(s*m>=i.getMaxByRange(d))return setTimeout((function(){t.setSlideOfTime()}),50),null;for(var g=[],v=s*m;v<(s+1)*m;v++)g.push((0,p.jsx)(b,{value:c[v],selected:r[v],label:"",i:v,id:this.props.id,step:d,on:this.onChange,type:l,theme:h,intervalsWidth:n/m,minMax:f,onText:this.onText,offText:this.offText,t:this.props.t},"".concat(v,"step").concat(d).concat(a)));var x=new Date(this.state.currentTime),y=Math.round(((x.getHours()+x.getMinutes()/60)/d-m*s)/m*n);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:u.timeLineContainer,title:this.props.t("Now"),children:(0,p.jsx)("div",{className:u.timeLine,style:{left:y}})}),g]})}},{key:"getSlideOfTime",value:function(t){var e=this.props.range;if(t=t||this.state.intervalsWidth){var i=(new Date).getHours(),n=this.getCountByRange(e,t)*e;return Math.floor(i/n)}return 0}},{key:"setSlideOfTime",value:function(){this.state.intervalsWidth&&this.setState({slideId:this.getSlideOfTime()})}},{key:"render",value:function(){var t=this;if(!this.state.intervalsWidth)return null;var e=this.state.slideId,i=this.props.range,n=this.props.classes,s=n.swiperContent,r=n.swiper,a=this.getNumberOfSectionsByRange(i);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:s,children:(0,p.jsx)("div",{className:r,children:this.getSlide()})}),(0,p.jsx)(u,{id:this.props.id,sections:a,quarterId:parseInt(e),onChange:function(e){t.setSlideId(e),clearInterval(t.setSlideInterval),t.setSlideInterval=setInterval((function(){return t.setSlideOfTime()}),12e4)}})]})}}]),i}(o.Component);S.getMaxByRange=function(t){return 24/t};var W=(0,h.withStyles)((function(t){return{swiperContent:{width:"100%",height:"100%",display:"flex",justifyContent:"space-between","@media (max-width:570px)":{justifyContent:"center"}},swiper:{width:"100%",height:"100%",display:"flex",alignItems:"center",marginTop:15,position:"relative"},timeLineContainer:{position:"absolute",height:"100%"},timeLine:{zIndex:100,borderWidth:2,borderColor:t.palette.text.primary,borderLeftStyle:"dashed",width:4,height:"calc(100% - 20px)",position:"relative"}}}))(S),C=function(t){(0,r.Z)(i,t);var e=(0,a.Z)(i);function i(t){var s;return(0,n.Z)(this,i),(s=e.call(this,t)).updateWindowDimensions=function(){var t,e=null===(t=s.tapperRef.current)||void 0===t?void 0:t.getBoundingClientRect().width;s.setState({intervalsWidth:e||30})},s.tapperRef=l().createRef(),s.state={intervalsWidth:0},s}return(0,s.Z)(i,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.updateWindowDimensions),this.updateWindowDimensions()}},{key:"componentDidUpdate",value:function(t){t.range!==this.props.range&&this.updateWindowDimensions(),t.windowWidth!==this.props.windowWidth&&this.updateWindowDimensions()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"render",value:function(){var t,e=this,i=this.props,n=i.type,s=i.theme,r=i.range,a=i.intervals,o=i.minMax,l=this.props.classes,h=l.tapperGrid,d=l.tapperInside,c=null===(t=this.tapperRef.current)||void 0===t?void 0:t.getBoundingClientRect().width;return c&&c!==this.state.intervalsWidth&&(this.updateWidth=this.updateWidth||setTimeout((function(){e.updateWidth=null,e.updateWindowDimensions()}),100)),(0,p.jsx)("div",{className:"".concat(h," m-1 h-100"),style:{backgroundColor:s.palette.background.default},children:(0,p.jsx)("div",{className:d,id:"".concat(this.props.id,"-tapper-inside"),ref:this.tapperRef,style:{padding:0,width:"100%"},children:this.props.intervalsWidth||this.state.intervalsWidth?(0,p.jsx)(W,{id:this.props.id,data:a,onChange:this.props.onChange,theme:s,type:n,range:r,intervalsWidth:this.props.intervalsWidth||this.state.intervalsWidth,minMax:o,t:this.props.t}):null})})}}]),i}(o.Component),k=(0,h.withStyles)((function(){return{tapperGrid:{margin:0,boxShadow:"none",borderRadius:0,alignItems:"center",padding:10,"@media (max-width:570px)":{margin:0,boxShadow:"none",borderRadius:0,alignItems:"center",padding:"0px 10px 0 60px"}},tapperInside:{overflow:"hidden",height:"100%",flexGrow:1,position:"relative",display:"flex",flexDirection:"column",justifyContent:"center"}}}))(C)},39044:function(t){t.exports=JSON.parse('{"temperature":{"min":0,"max":28,"step":0.5,"unit":"\xb0"},"percent":{"min":0,"max":100,"unit":"%"},"onoff":{"min":0,"max":1}}')}}]);
//# sourceMappingURL=src_components_DayOfWeekPanel_js-src_components_IntervalsContainer_js-src_assets_img_day-nigh-b81739.33174a3e.chunk.js.map