"use strict";(self.webpackChunkiobroker_vis_2_widgets_scheduler=self.webpackChunkiobroker_vis_2_widgets_scheduler||[]).push([["node_modules_iobroker_vis-2-widgets-react-dev_index_jsx-_adb40","node_modules_iobroker_vis-2-widgets-react-dev_index_jsx-_adb41"],{25582:function(j,f,a){a.r(f),a.d(f,{VisRxWidget:function(){return s.Z},__esModule:function(){return s.X}});var s=a(90384)},90384:function(j,f,a){var s=a(64836);Object.defineProperty(f,"X",{value:!0}),f.Z=void 0;var O=s(a(64687)),E=s(a(17156)),R=s(a(56690)),W=s(a(89728)),C=s(a(66115)),w=s(a(61655)),N=s(a(94993)),x=s(a(73808)),I=s(a(38416)),d=s(a(4819)),b=a(94427),p=a(75606);function D(u,l){var i=Object.keys(u);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(u);l&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(u,t).enumerable})),i.push.apply(i,e)}return i}function g(u){for(var l=1;l<arguments.length;l++){var i=arguments[l]!=null?arguments[l]:{};l%2?D(Object(i),!0).forEach(function(e){(0,I.default)(u,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(i)):D(Object(i)).forEach(function(e){Object.defineProperty(u,e,Object.getOwnPropertyDescriptor(i,e))})}return u}function J(u){var l=M();return function(){var e=(0,x.default)(u),t;if(l){var n=(0,x.default)(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return(0,N.default)(this,t)}}function M(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(u){return!1}}var B=function(u){(0,w.default)(i,u);var l=J(i);function i(e){var t;return(0,R.default)(this,i),t=l.call(this,e),(0,I.default)((0,C.default)(t),"getIdSubscribeState",function(n,r){return t.props.socket.getState(n).then(function(o){return r(n,o),t.props.socket.subscribeState(n,function(c,h){return r(n,h)})})}),t.onStateChanged=t.onStateChanged.bind((0,C.default)(t)),t.state=g(g({},e),{},{values:{},data:JSON.parse(JSON.stringify(e.data||{})),style:JSON.parse(JSON.stringify(e.style||{})),rxData:JSON.parse(JSON.stringify(e.data||{})),rxStyle:JSON.parse(JSON.stringify(e.style||{}))}),t.linkContext={IDs:[]},t}return(0,W.default)(i,[{key:"renderWidgetBody",value:function(){}},{key:"onStateUpdated",value:function(t,n){}},{key:"formatValue",value:function(t,n){if(typeof t=="number"){var r;n===0?t=Math.round(t):t=Math.round(t*100)/100,(r=this.props.systemConfig)!==null&&r!==void 0&&r.common&&this.props.systemConfig.common.isFloatComma&&(t=t.toString().replace(".",","))}return t==null?"":t.toString()}},{key:"wrapContent",value:function(t,n,r,o,c){return d.default.createElement(b.Card,{style:{width:"calc(100% - 8px)",height:"calc(100% - 8px)",margin:4},onClick:c},d.default.createElement(b.CardContent,{style:g({display:"flex",flexDirection:"column",alignItems:"center",height:"100%",position:"relative"},r)},this.state.rxData.name?d.default.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",alignItems:"center"}},d.default.createElement("div",{style:g({fontSize:24,paddingTop:0,paddingBottom:4},o)},this.state.rxData.name),n||null):n||null,t))}},{key:"onStateChanged",value:function(t,n){if(n){var r=JSON.parse(JSON.stringify(this.state.values));Object.keys(n).forEach(function(o){return r["".concat(t,".").concat(o)]=n[o]}),this.onStateUpdated(t,n),this.setState({values:r})}}},{key:"componentDidMount",value:function(){var e=(0,E.default)(O.default.mark(function n(){var r,o,c=this,h;return O.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:(r=this.getWidgetInfo())===null||r===void 0||(o=r.visAttrs)===null||o===void 0||o.forEach(function(m){var S;return m==null||(S=m.fields)===null||S===void 0?void 0:S.forEach(function(y){(y==null?void 0:y.type)==="id"&&Object.keys(c.state.data).forEach(function(k){if(k.match(new RegExp("^".concat(y.name,"[0-9]*$")))){var P=c.state.data[k];c.linkContext.IDs.includes(P)||c.linkContext.IDs.push(P)}})})}),h=0;case 2:if(!(h<this.linkContext.IDs.length)){v.next=8;break}return v.next=5,this.getIdSubscribeState(this.linkContext.IDs[h],this.onStateChanged);case 5:h++,v.next=2;break;case 8:case"end":return v.stop()}},n,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"componentWillUnmount",value:function(){var t=this;this.linkContext.IDs.forEach(function(n){return t.props.socket.unsubscribeState(n,t.onStateChanged)})}},{key:"render",value:function(){var t,n;return d.default.createElement("div",{style:{width:(t=this.state.style)===null||t===void 0?void 0:t.width,height:(n=this.state.style)===null||n===void 0?void 0:n.height}},this.renderWidgetBody())}}],[{key:"getI18nPrefix",value:function(){return""}},{key:"t",value:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return p.I18n.t.apply(p.I18n,["".concat(this.getI18nPrefix()).concat(t)].concat(r))}},{key:"getLanguage",value:function(){return p.I18n.getLanguage()}}]),i}(d.default.Component),U=B;f.Z=U}}]);

//# sourceMappingURL=node_modules_iobroker_vis-2-widgets-react-dev_index_jsx-_adb40.34ff59c8.chunk.js.map