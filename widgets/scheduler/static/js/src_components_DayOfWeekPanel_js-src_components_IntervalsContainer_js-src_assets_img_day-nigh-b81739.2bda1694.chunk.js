"use strict";(self.webpackChunkiobroker_vis_2_widgets_scheduler=self.webpackChunkiobroker_vis_2_widgets_scheduler||[]).push([["src_components_DayOfWeekPanel_js-src_components_IntervalsContainer_js-src_assets_img_day-nigh-b81739"],{69438:function(t,e,n){var i=n(15671),r=n(43144),a=n(60136),s=n(27277),o=n(4819),l=n(12181),d=n(94427),h=n(80184),c=["Su","Mo","Tu","We","Th","Fr","Sa"],p=[1,2,3,4,5,6,0],u=[0,1,2,3,4,5,6],f=function(t){(0,a.Z)(n,t);var e=(0,s.Z)(n);function n(){return(0,i.Z)(this,n),e.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){var t=this,e=this.props.classes,n=e.flow,i=e.label,r="monday"===this.props.firstDayOfWeek?p:u;return(0,h.jsx)(d.FormControl,{component:"fieldset",style:{marginRight:12},children:r.map((function(e){return(0,h.jsx)(d.FormControlLabel,{style:{marginLeft:6},control:(0,h.jsx)(d.Checkbox,{checked:t.props.dow.includes(e),color:"primary",className:n,onChange:function(n){return t.props.onChange(e,n.target.checked)}}),label:t.props.t(c[e]),className:i},e)}))})}}]),n}(o.Component);e.Z=(0,l.withStyles)((function(){return{flow:{width:26,height:28,maxHeight:28,minHeight:28,padding:0,display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",position:"relative"},label:{color:function(t){return t.theme.palette.text.primary},marginLeft:0,marginRight:12}}}))(f)},49744:function(t,e,n){n.d(e,{Z:function(){return k}});var i=n(15671),r=n(43144),a=n(60136),s=n(27277),o=n(4819),l=n.n(o),d=n(12181),h=n.p+"static/media/day-night.d6f09cbf18746b70d451.jpg",c=n(80184),p=function(t){(0,a.Z)(n,t);var e=(0,s.Z)(n);function n(){var t;(0,i.Z)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(t=e.call.apply(e,[this].concat(a))).onSlide=function(e){t.props.onChange&&t.props.onChange(e)},t}return(0,r.Z)(n,[{key:"render",value:function(){var t=this,e=this.props.sections,n=this.props.classes,i=n.dayNightCont,r=n.dayNightSlide,a=n.dayNightQuarter,s=n.dn,o=1===e?0:78,l=100/e,d=Array(e).fill().map((function(e,n){return(0,c.jsx)("div",{className:a,onClick:function(){return t.onSlide(n)}},n)}));return(0,c.jsx)("div",{className:i,style:{height:o},children:(0,c.jsxs)("div",{children:[(0,c.jsx)("img",{src:h,alt:"day-night",id:"day-night"}),(0,c.jsxs)("div",{className:s,children:[d,(0,c.jsx)("div",{className:r,style:{maxWidth:"".concat(l,"%"),width:"".concat(l,"%"),left:"calc(".concat(this.props.quarterId*l,"% - 5px)")}})]})]})})}}]),n}(o.Component),u=(0,d.withStyles)({dayNightCont:{position:"relative",width:"100%",display:"flex",justifyContent:"center",overflow:"hidden",transition:"height 300ms ease-out","&>div":{position:"relative"},"&>div>.day_night":{width:"100%",maxWidth:550,maxHeight:90},"&>div>img":{width:"100%",maxWidth:550,height:"auto",maxHeight:90}},dayNightQuarter:{display:"flex",width:"100%"},dayNightSlide:{display:"flex",width:"100%",height:"calc(100% - 9px)",position:"absolute",border:"6px solid #FFF",marginTop:-3,transition:"all 400ms ease-out","&::before":{content:'""',position:"absolute",left:"calc(-200% - 5px)",top:-5,height:"calc(100% + 12px)",width:"200%",pointerEvents:"none",background:"linear-gradient(to left,  rgba(255,255,255,1) 0%,rgba(255,255,255,0) 99%,rgba(255,255,255,0) 100%)",filter:"progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#00ffffff',GradientType=0 )"},"&::after":{content:'""',position:"absolute",right:"calc(-200% - 5px)",top:-5,height:"calc(100% + 12px)",width:"200%",pointerEvents:"none",background:"linear-gradient(to right,  rgba(255,255,255,1) 0%,rgba(255,255,255,0) 99%,rgba(255,255,255,0) 100%)",filter:"progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#00ffffff',GradientType=0 )"}},dn:{width:"100%",maxWidth:550,maxHeight:90,height:"100%",position:"absolute",top:0,left:0,display:"flex"}})(p),f=n(1413),m=n(94427),g=n(75606),v=JSON.parse('{"temperature":{"min":0,"max":25},"percent":{"min":0,"max":100},"onoff":{"min":0,"max":1}}'),y=(0,d.makeStyles)({root:function(t){return{color:t.theme.palette.primary.light,borderRadius:0,transition:"all 100ms ease-out",position:"relative","&&":{width:"".concat(t.intervalsWidth,"px"),padding:"0",height:"calc(100% - 90px)"}}},thumb:function(t){return{left:"calc(50% + 10px)",width:0,height:0,display:"onoff"===t.type?"none":"flex"}},active:{backgroundColor:"transparent",width:0,height:0},valueLabel:function(t){return{left:-35,background:"transparent","& *":{background:"transparent",fontWeight:100,color:t.theme.palette.text.primary,fontSize:"1.0rem",transition:"all 100ms ease-out"}}},valueLabelCircle:{background:"transparent"},track:{transition:"all 100ms ease-out",borderRadius:4,"&&":{width:"calc(100% - 8px)"}},rail:function(t){return{transition:"all 100ms ease-out",borderRadius:4,height:"calc(100% + 5px)",marginTop:-5,backgroundColor:t.theme.palette.primary.light,"&&":{width:"calc(100% - 5px)",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px"}}}}),x=function(t){var e=(0,f.Z)({},t);return delete e.intervalsWidth,delete e.type,delete e.theme,(0,c.jsx)(m.Slider,(0,f.Z)({id:"slider_".concat(t.idx),classes:y({intervalsWidth:t.intervalsWidth,type:t.type,theme:t.theme})},e))},w=function(t){(0,a.Z)(n,t);var e=(0,s.Z)(n);function n(t){var r;return(0,i.Z)(this,n),(r=e.call(this,t)).handleSliderChange=function(t,e){t.shiftKey||r.on("data",e)},r.handleSelected=function(){return r.on("selected",!r.props.selected)},r.on=function(t,e){r.props.on&&r.props.on(t,e,r.props.i)},r.getLabel=function(){var t=r.props,e=t.step,n=t.i*e;return[parseInt(n),"0".concat(n%1*60).slice(-2)]},r.state={intervalsWidth:t.intervalsWidth},r.installed=!1,r}return(0,r.Z)(n,[{key:"componentDidMount",value:function(){this.installHandlers()}},{key:"componentWillUnmount",value:function(){var t=window.document.getElementById("slider_".concat(this.props.i));t&&(t.onmousemove=null)}},{key:"installHandlers",value:function(){var t=window.document.getElementById("slider_".concat(this.props.i));t&&!this.installed&&(this.installed=!0,t._interval=this,t.onmousemove=function(t){var e;if((t.buttons||null!==(e=t.touches)&&void 0!==e&&e.length)&&t.shiftKey){var n;console.log(t);var i,r=this._interval,a=this.getBoundingClientRect().height;i=null!==(n=t.touches)&&void 0!==n&&n.length?t.touches[0].clientY-this.getBoundingClientRect().top:t.clientY-this.getBoundingClientRect().top;var s,o=r.getMinMax(),l=o.min,d=o.max;switch(r.props.type){case"temperature":s=i/a,s=l+Math.round((d-l)*(1-s)*2)/2,s=Math.min(d,Math.max(l,s));break;case"onoff":s=Math.round(i/a*100)<50;break;default:s=100-(s=Math.round(i/a*100)),s=Math.min(100,Math.max(0,s))}console.log("pos",r.props.i,i,a,s),r.props.on("data",s,r.props.i)}})}},{key:"componentDidUpdate",value:function(t){this.installHandlers(),t.intervalsWidth!==this.props.intervalsWidth&&this.setState({intervalsWidth:this.props.intervalsWidth})}},{key:"getPostfix",value:function(t){switch(this.props.type){case"temperature":return"".concat(t.toString(),"\xba");case"onoff":return t?(0,c.jsx)("span",{style:this.props.theme.palette.text.success,children:"on"}):(0,c.jsx)("span",{style:this.props.theme.palette.text.danger,children:"off"});default:return"".concat(t.toString(),"%")}}},{key:"getMinMax",value:function(){return v[this.props.type]}},{key:"render",value:function(){var t=this.props,e=t.value,n=t.i,i=t.selected,r=t.theme,a=t.type,s=this.state.intervalsWidth,o=this.props.classes,l=o.pretty,d=o.prettyLabel,h=o.prettyTime,p=o.active,u=o.prettySecs;if(n<0)return"";var f=this.getMinMax(),v=f.min,y=f.max,w=f.step,b=this.getLabel(),W=e||0,S="onoff"===a?this.getPostfix(W||0):"",C="onoff"!==a?this.getPostfix(W||0):"";return(0,c.jsx)(m.Tooltip,{title:g.I18n.t('Press "shift" and move mouse to change more than one slider'),classes:{popper:this.props.tooltip},children:(0,c.jsxs)("span",{className:l,children:[(0,c.jsx)("span",{className:d,children:S}),(0,c.jsx)(x,{idx:n,ref:this.ref,theme:r,intervalsWidth:s,type:a,orientation:"vertical","aria-label":"pretty slider",value:W,valueLabelFormat:C,min:v,max:y,step:w||1,selected:i,onChange:this.handleSliderChange,valueLabelDisplay:"on"},n),(0,c.jsxs)("div",{className:"".concat(h," ").concat(i?p:""),onClick:this.handleSelected,children:[(0,c.jsx)("span",{style:{color:this.props.theme.palette.text.primary},children:b[0]}),(0,c.jsx)("span",{className:u,children:b[1]})]})]})})}}]),n}(o.Component),b=(0,d.withStyles)((function(){return{pretty:{position:"relative",height:"100%",display:"flex",flexDirection:"column",width:function(t){return t.intervalsWidth}},prettyLabel:{color:"#6c7a93",fontWeight:700,fontSize:".9rem",height:30,width:"calc(100% - 5px)",textAlign:"center"},prettyTime:{position:"absolute",fontSize:"0.9rem",fontWeight:700,bottom:27,width:"calc(100% - 5px)",borderRadius:"4px",height:28,maxHeight:28,minHeight:28,display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},active:{backgroundColor:function(t){return t.theme.palette.primary.light},color:"#FFF"},prettySecs:{fontSize:"0.6rem",fontWeight:100,color:function(t){return t.theme.palette.text.primary}},tooltip:{pointerEvents:"none"}}}))(w),W=function(t){(0,a.Z)(n,t);var e=(0,s.Z)(n);function n(t){var r;return(0,i.Z)(this,n),(r=e.call(this,t)).timeInterval=null,r.setSlideInterval=null,r.getSectionByRange=function(t){if(r.props.intervalsWidth>=720)return.25===t?4:.5===t?2:1;switch(t){case.25:return 16;case.5:return 8;case 1:return 4;case 2:return 3;case 4:return 1;default:return 2}},r.getCountByRange=function(t){if(r.state.intervalsWidth>=720)return.5===t||.25===t?24:n.getMaxByRange(t);switch(t){case.25:case.5:case 1:case 4:return 6;default:return 4}},r.setSlideId=function(t){r.setState({slideId:parseInt(t)})},r.onChange=function(t,e,n){var i=r.state.selected,a=JSON.parse(JSON.stringify(r.state));if("selected"===t)a[t][n]=e,r.setState(a);else if("data"===t){var s=JSON.parse(JSON.stringify(r.props.data)),o=i[n];o||r.setState({selected:[]}),o&&0!==i.filter((function(t){return t})).length?s.forEach((function(t,n){i[n]&&(s[n]=e)})):s[n]=e,r.props.onChange(s)}},r.setSlideOfTime=function(){var t=r.props.range;if(r.state.intervalsWidth){var e=(new Date).getHours(),n=r.getCountByRange(t)*t;r.setState({slideId:Math.floor(e/n)})}},r.state={slideId:0,selected:[],intervalsWidth:t.intervalsWidth,key:parseInt(Date.now()+1e3*Math.random()),currentTime:new Date},r}return(0,r.Z)(n,[{key:"componentDidMount",value:function(){var t=this;this.setSlideOfTime(),this.timeInterval=setInterval((function(){return t.setState({currentTime:new Date})}),12e4),this.setSlideInterval=setInterval((function(){return t.setSlideOfTime()}),12e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timeInterval),this.timeInterval=null,clearInterval(this.setSlideInterval),this.setSlideInterval=null}},{key:"componentDidUpdate",value:function(t){t.range!==this.props.range&&(this.setState({slideId:0}),this.setSlideOfTime()),this.props.intervalsWidth&&t.intervalsWidth!==this.props.intervalsWidth&&this.setState({intervalsWidth:this.props.intervalsWidth+Math.random(),key:parseInt(Date.now()+1e3*Math.random())})}},{key:"getSlide",value:function(){for(var t=this.state,e=t.intervalsWidth,n=t.slideId,i=t.selected,r=t.key,a=this.props,s=a.type,o=a.theme,l=a.range,d=a.data,h=a.classes,p=this.getCountByRange(l),u=[],f=n*p;f<(n+1)*p;f++)u.push((0,c.jsx)(b,{value:d[f],selected:i[f],label:"",i:f,step:l,on:this.onChange,type:s,theme:o,intervalsWidth:e/p},"".concat(f,"step").concat(l).concat(r)));var m=new Date(this.state.currentTime),g=Math.round(((m.getHours()+m.getMinutes()/60)/l-p*n)/p*e);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:h.timeLineContainer,children:(0,c.jsx)("div",{className:h.timeLine,style:{left:g}})}),u]})}},{key:"render",value:function(){var t=this;if(!this.state.intervalsWidth)return null;var e=this.state.slideId,n=this.props.range,i=this.props.classes,r=i.swiperContent,a=i.swiper,s=this.getSectionByRange(n);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:r,children:(0,c.jsx)("div",{className:a,children:this.getSlide()})}),(0,c.jsx)(u,{sections:s,quarterId:parseInt(e),onChange:function(e){t.setSlideId(e),clearInterval(t.setSlideInterval),t.setSlideInterval=setInterval((function(){return t.setSlideOfTime()}),12e4)}})]})}}]),n}(o.Component);W.getMaxByRange=function(t){return 24/t};var S=(0,d.withStyles)((function(t){return{swiperContent:{width:"100%",height:"100%",display:"flex",justifyContent:"space-between","@media (max-width:570px)":{justifyContent:"center"}},swiper:{width:"100%",height:"100%",display:"flex",alignItems:"center",marginTop:15,position:"relative"},timeLineContainer:{position:"absolute",height:"100%"},timeLine:{zIndex:100,borderWidth:1,borderColor:t.palette.text.primary,borderLeftStyle:"dashed",width:4,height:"calc(100% - 20px)",position:"relative"}}}))(W),C=function(t){(0,a.Z)(n,t);var e=(0,s.Z)(n);function n(t){var r;return(0,i.Z)(this,n),(r=e.call(this,t)).updateWindowDimensions=function(){var t,e=null===(t=r.tapperRef.current)||void 0===t?void 0:t.getBoundingClientRect().width;r.setState({intervalsWidth:e||30})},r.tapperRef=l().createRef(),r.state={intervalsWidth:0},r}return(0,r.Z)(n,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.updateWindowDimensions),this.updateWindowDimensions()}},{key:"componentDidUpdate",value:function(t){t.range!==this.props.range&&this.updateWindowDimensions(),t.windowWidth!==this.props.windowWidth&&this.updateWindowDimensions()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"render",value:function(){var t,e=this,n=this.props,i=n.type,r=n.theme,a=n.range,s=n.intervals,o=this.props.classes,l=o.tapperGrid,d=o.tapperInside,h=null===(t=this.tapperRef.current)||void 0===t?void 0:t.getBoundingClientRect().width;return h&&h!==this.state.intervalsWidth&&(this.updateWidth=this.updateWidth||setTimeout((function(){e.updateWidth=null,e.updateWindowDimensions()}),100)),(0,c.jsx)("div",{className:"".concat(l," m-1 h-100"),style:{backgroundColor:r.palette.background.default},children:(0,c.jsx)("div",{className:d,id:"tapper-inside",ref:this.tapperRef,style:{padding:0,width:"100%"},children:this.props.intervalsWidth||this.state.intervalsWidth?(0,c.jsx)(S,{data:s,onChange:this.props.onChange,theme:r,type:i,range:a,intervalsWidth:this.props.intervalsWidth||this.state.intervalsWidth}):null})})}}]),n}(o.Component),k=(0,d.withStyles)((function(){return{tapperGrid:{margin:0,boxShadow:"none",borderRadius:0,alignItems:"center",padding:10,"@media (max-width:570px)":{margin:0,boxShadow:"none",borderRadius:0,alignItems:"center",padding:"0px 10px 0 60px"}},tapperInside:{overflow:"hidden",height:"100%",flexGrow:1,position:"relative",display:"flex",flexDirection:"column",justifyContent:"center"}}}))(C)}}]);
//# sourceMappingURL=src_components_DayOfWeekPanel_js-src_components_IntervalsContainer_js-src_assets_img_day-nigh-b81739.2bda1694.chunk.js.map