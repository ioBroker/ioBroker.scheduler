{"version":3,"sources":["components/DevicesPanel.js","components/DayOfWeekPanel.js","assets/img/day-night.jpg","components/DayNightSwitcher.js","components/Interval.js","components/Intervals.js","components/IntervalsContainer.js","components/PriorityPanel.js","components/TypePanel.js","components/ProfilesPanel.js","components/StatePanel.js","App.js","serviceWorker.js","theme.js","index.js"],"names":["checkObject","obj","type","common","unit","DevicesPanel","props","deviceAdd","device","devices","JSON","parse","stringify","members","push","onChange","deviceDelete","splice","indexOf","state","showSelectId","this","imagePrefix","filterFunc","dialogName","adapterName","themeType","socket","onClose","setState","onOk","selected","id","title","errors","forEach","duplicates","k","profiles","profile","data","includes","prio","I18n","t","devicesCache","lang","getLanguage","renderSelectIdDialog","FormLabel","component","className","classes","tapperTitle","style","display","map","Tooltip","length","join","Chip","label","deviceContainer","src","icons","deviceIcon","Utils","getObjectNameFromObj","deviceId","onDelete","isExpert","backgroundColor","chip","disabled","Fab","size","color","onClick","Component","withStyles","fontSize","textTransform","paddingBottom","marginRight","marginTop","marginBottom","fontStyle","height","width","alignItems","daysOfWeek","dowOrderMonday","dowOrderSunday","DayOfWeekPanel","flow","dowOrder","firstDayOfWeek","FormControl","index","FormControlLabel","control","Checkbox","checked","dow","e","target","maxHeight","minHeight","padding","justifyContent","cursor","position","theme","palette","text","primary","DayNightSwitcher","onSlide","quorteId","sections","dayNightCont","dayNightSlide","dayNightQoute","dn","region","quortes","Array","fill","_","i","dayNight","alt","maxWidth","left","overflow","transition","border","content","top","pointerEvents","background","filter","right","usePrettoSliderStyles","makeStyles","root","light","borderRadius","intervalsWidth","thumb","active","valueLabel","fontWeight","track","rail","borderBottomLeftRadius","borderBottomRightRadius","PrettoSlider","componentProps","Slider","Interval","handleSliderChange","event","on","handleSelected","field","value","getLabel","step","parseInt","slice","prevProps","toString","success","danger","minmax","pretto","prettoLabel","prettoTime","prettoSecs","getMinMax","min","max","val","vl","getPostfix","v2","orientation","aria-label","valueLabelFormat","valueLabelDisplay","flexDirection","textAlign","bottom","Intervals","timeInterval","getSectionByRange","range","getCountByRange","getMaxByRange","prev","slideId","setSlideId","next","selectAll","selectNone","inSelected","element","onSwipeLeftListener","onSwipeRightListener","key","Date","now","Math","random","currentTime","setInterval","clearInterval","nextProps","count","sliders","leftOffset","round","getHours","getMinutes","timeLineContainer","timeLine","swiperContent","swiper","getSlide","zIndex","borderWidth","borderColor","borderLeftStyle","IntervalsContainer","updateWindowDimensions","w","tapperRef","current","getBoundingClientRect","React","createRef","window","addEventListener","windowWidth","removeEventListener","intervals","tapperGrid","tapperInside","default","ref","margin","boxShadow","flexGrow","PriorityPanel","evt","priority","Select","labelId","MenuItem","TypePanel","defaultProfileData","enabled","intervalDuration","DndPreview","usePreview","item","preview","ProfileDrag","useDrag","profileId","profileData","children","end","monitor","dropResult","getDropResult","onMoveItem","folderId","collect","isDragging","handlerId","getHandlerId","dragRef","useEffect","getEmptyImage","captureDraggingState","sortItems","a","b","FolderDrop","useDrop","accept","drop","folderData","canDrop","childId","parentId","child","find","parent","foundParent","getItem","isOver","CanDrop","dndHover","ProfilesPanel","onActive","onSelectProfile","onDialogClose","isDialogOpen","dialogElementTitle","dialogElementId","dialogElementParent","duplicate","isNew","onEditDialog","dialogElementType","onUpdateItem","newProfiles","newProfile","foundProfile","onChangeProfiles","onDeleteItem","removeItem","toDelete","newParentId","onAddChild","uuidv4","onDuplicate","source","onOpen","collapsed","pos","sort","localStorage","setItem","onCloseAll","onOpenAll","onSetEnabled","folder","folderItem","level","searchText","flowMenuItem","editButton","isOpen","subProfiles","sub","folderSample","folderIcon","stopPropagation","result","marginLeft","disableRipple","Typography","variant","scheduleIcon","onSearch","isSearch","onSearchedText","head","TextField","placeholder","InputProps","endAdornment","IconButton","searchIcon","isTouchDevice","navigator","msMaxTouchPoints","ee","folderItems","canSubmit","Dialog","open","onKeyDown","keyCode","fullWidth","closeButton","DialogTitle","DialogContent","autoFocus","error","helperText","startAdornment","InputAdornment","DialogActions","Button","startIcon","toLowerCase","items","DndProvider","backend","TouchBackend","HTML5Backend","scrolledAuto","Paper","Divider","MenuList","renderEditDeleteDialog","overflowX","overflowY","dark","grey","divide","paddingRight","StatePanel","stateChange","possibleStateId","flex","readOnly","AntTabs","indicator","Tabs","AntTab","minWidth","opacity","Tab","App","extendedProps","translations","en","require","de","ru","pt","nl","fr","it","es","pl","sentryDSN","innerWidth","windowHeight","innerHeight","onLeftOpen","panelIndex","leftOpen","onDrawerHandler","isDrawOpen","setTimeout","currentProfile","native","activeProfile","changeProfile","newData","findIndex","fullUpdateNativeValue","onType","oldMax","newMax","interval","normalizedInterval","onPriority","onDevices","onState","getState","onDow","day","onIntervals","changeProfiles","onRange","relation","newIntervals","chunk","reduce","newIndex","shift","tasks","task","method","getObject","setObject","delObject","newId","settings","savedNative","getStateId","read","write","role","def","name","p","isOldNormalId","oldStateId","newStateId","processTasks","then","console","log","loadStates","attr","changed","getIsChanged","instance","indicatorColor","textColor","centered","duration","systemConfig","rows","renderProfile","renderType","renderDow","renderPriority","renderDevices","renderRange","renderState","Drawer","anchor","PaperProps","mobilePanel","flowDark","closeLabelLeftSm","d","getObjectSafe","icon","getObjectIcon","getParentId","newLastDevices","lastDevices","updateDevices","_list","unshift","replace","FORBIDDEN_CHARS","parentProfile","loaded","checkDevices","profileGrid","paneling","profilePanel","drawer","drawerClose","paper","drawerPaper","drGrid","drGridClose","app","labelLeftSm1","renderDrawer","Grid","container","spacing","mobileScrolled","xs","lg","slidersContainer","labelMenuBottom","labelRightSm5","labelRightSm3","labelLeftSm2","labelRightSm6","labelRightSm8","emptyProfile","renderSaveCloseButtons","lastIndexOf","substring","GenericApp","leftRSM","flexBasis","labelRightSm4","labelRightSm7","labelMenu","labelNenuBottom","transform","tabContent","tabContentIFrame","Boolean","location","hostname","match","Theme","themeName","getThemeName","version","build","ReactDOM","render","onThemeChange","_theme","document","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.8fd89d48.chunk.js","sourcesContent":["import PropTypes from 'prop-types';\r\nimport React, { Component } from 'react';\r\n\r\nimport {\r\n    FormLabel, withStyles, Chip, Tooltip, Fab,\r\n} from '@material-ui/core';\r\nimport IconAdd from '@material-ui/icons/Add';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport DialogSelectID from '@iobroker/adapter-react/Dialogs/SelectID';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\nimport Icon from '@iobroker/adapter-react/Components/Icon';\r\n\r\nconst styles = {\r\n    tapperTitle: {\r\n        fontSize: '1.3rem',\r\n        textTransform: 'uppercase',\r\n        paddingBottom: '1rem',\r\n    },\r\n    chip: {\r\n        marginRight: 10,\r\n        marginTop: 5,\r\n        marginBottom: 5,\r\n    },\r\n    deviceId: {\r\n        fontSize: 10,\r\n        fontStyle: 'italic',\r\n    },\r\n    deviceIcon: {\r\n        height: 26,\r\n        width: 26,\r\n        marginRight: 4,\r\n    },\r\n    deviceContainer: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n    },\r\n};\r\n\r\nfunction checkObject(obj, type) {\r\n    if (!obj || !obj.common) {\r\n        return false;\r\n    }\r\n    if (type === 'percent') {\r\n        return obj.common.unit === '%' || ('min' in obj.common && 'max' in obj.common);\r\n    }\r\n    if (type === 'temperature') {\r\n        return obj.common.type === 'number';\r\n    }\r\n    if (type === 'onoff') {\r\n        return obj.common.type === 'boolean';\r\n    }\r\n    return false;\r\n}\r\n\r\nclass DevicesPanel extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            showSelectId: false,\r\n        };\r\n    }\r\n\r\n    deviceAdd = device => {\r\n        const devices = JSON.parse(JSON.stringify(this.props.members));\r\n        devices.push(device);\r\n        this.props.onChange(devices);\r\n    }\r\n\r\n    deviceDelete = device => {\r\n        const devices = JSON.parse(JSON.stringify(this.props.members));\r\n        devices.splice(devices.indexOf(device), 1);\r\n        this.props.onChange(devices);\r\n    }\r\n\r\n    renderSelectIdDialog() {\r\n        if (this.state.showSelectId) {\r\n            return <DialogSelectID\r\n                key=\"tableSelect\"\r\n                imagePrefix=\"../..\"\r\n                filterFunc={obj => checkObject(obj, this.props.type)}\r\n                dialogName={this.props.adapterName}\r\n                themeType={this.props.themeType}\r\n                socket={this.props.socket}\r\n                // statesOnly\r\n                onClose={() => this.setState({ showSelectId: false })}\r\n                onOk={selected => {\r\n                    const id = selected;\r\n                    this.setState({ showSelectId: false }, () => this.deviceAdd(id));\r\n                }}\r\n            />;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    render() {\r\n        const title = this.props.title ? this.props.title : 'Devices';\r\n\r\n        const errors = {};\r\n\r\n        this.props.members.forEach(device => {\r\n            let duplicates = 0;\r\n            errors[device] = [];\r\n\r\n            for (const k in this.props.profiles) {\r\n                const profile = this.props.profiles[k];\r\n                if (profile.type === 'profile'\r\n                    && profile.data.members.includes(device)\r\n                    && profile.data.prio === this.props.prio\r\n                ) {\r\n                    duplicates++;\r\n                }\r\n            }\r\n            if (duplicates > 1) {\r\n                errors[device].push(I18n.t('duplicate'));\r\n            }\r\n\r\n            if (!this.props.devicesCache[device]) {\r\n                if (this.props.devicesCache[device] === false) {\r\n                    errors[device].push(I18n.t('not exists'));\r\n                }\r\n            } else if (!checkObject(this.props.devicesCache[device], this.props.type)) {\r\n                errors[device].push(I18n.t('wrong type'));\r\n            }\r\n        });\r\n\r\n        const lang = I18n.getLanguage();\r\n\r\n        return <>\r\n            {this.renderSelectIdDialog()}\r\n            <FormLabel component=\"legend\" className={this.props.classes.tapperTitle}>\r\n                {I18n.t(title)}\r\n            </FormLabel>\r\n            <div style={{ display: 'flex' }}>\r\n                <div>\r\n                    {this.props.members.map(id => <span key={id}>\r\n                        <Tooltip\r\n                            title={errors[id].length ? `${I18n.t('Errors')}: ${errors[id].join(', ')}` : ''}\r\n                        >\r\n                            <Chip\r\n                                label={<div className={this.props.classes.deviceContainer}>\r\n                                    <Icon src={this.props.icons[id]} className={this.props.classes.deviceIcon} />\r\n                                    <div>\r\n                                        {this.props.devicesCache[id] ? <div>\r\n                                            {Utils.getObjectNameFromObj(this.props.devicesCache[id], lang)}\r\n                                        </div> : null}\r\n                                        <div className={this.props.classes.deviceId}>{id}</div>\r\n                                    </div>\r\n                                </div>}\r\n                                onDelete={this.props.isExpert ? () => this.deviceDelete(id) : null}\r\n                                style={errors[id].length ? { backgroundColor: 'red' } : null}\r\n                                className={this.props.classes.chip}\r\n                                disabled={!this.props.isExpert}\r\n                            />\r\n                        </Tooltip>\r\n                    </span>)}\r\n                </div>\r\n                {this.props.isExpert\r\n                    ? <Fab\r\n                        size=\"small\"\r\n                        color=\"primary\"\r\n                        onClick={() => this.setState({ showSelectId: true })}\r\n                    >\r\n                        <IconAdd />\r\n                    </Fab>\r\n                    : null}\r\n            </div>\r\n        </>;\r\n    }\r\n}\r\n\r\nDevicesPanel.propTypes = {\r\n    type: PropTypes.string,\r\n    members: PropTypes.array,\r\n    onChange: PropTypes.func,\r\n    title: PropTypes.string,\r\n    isExpert: PropTypes.bool,\r\n    socket: PropTypes.object,\r\n    devicesCache: PropTypes.object,\r\n    icons: PropTypes.object,\r\n};\r\nexport default withStyles(styles)(DevicesPanel);\r\n","import PropTypes from 'prop-types';\r\nimport { FormControl, FormControlLabel, withStyles } from '@material-ui/core';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport React, { Component } from 'react';\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\n\r\nconst daysOfWeek = [\r\n    'Su',\r\n    'Mo',\r\n    'Tu',\r\n    'We',\r\n    'Th',\r\n    'Fr',\r\n    'Sa',\r\n];\r\n\r\nconst dowOrderMonday = [1, 2, 3, 4, 5, 6, 0];\r\nconst dowOrderSunday = [0, 1, 2, 3, 4, 5, 6];\r\n\r\nconst styles = () => ({\r\n    flow: {\r\n        width: 26,\r\n        height: 28,\r\n        maxHeight: 28,\r\n        minHeight: 28,\r\n        padding: 0,\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        cursor: 'pointer',\r\n        position: 'relative',\r\n    },\r\n    label: {\r\n        color: props => props.theme.palette.text.primary,\r\n    },\r\n});\r\n\r\nclass DayOfWeekPanel extends Component {\r\n    render() {\r\n        const { flow, label } = this.props.classes;\r\n        const dowOrder = this.props.firstDayOfWeek === 'monday' ? dowOrderMonday : dowOrderSunday;\r\n\r\n        return <FormControl component=\"fieldset\">\r\n            {dowOrder.map(index => <FormControlLabel\r\n                key={index}\r\n                control={\r\n                    <Checkbox\r\n                        checked={this.props.dow.includes(index)}\r\n                        color=\"primary\"\r\n                        className={flow}\r\n                        onChange={e => this.props.onChange(index, e.target.checked)}\r\n                    />\r\n                }\r\n                label={I18n.t(daysOfWeek[index])}\r\n                className={label}\r\n            />)}\r\n        </FormControl>;\r\n    }\r\n}\r\n\r\nDayOfWeekPanel.propTypes = {\r\n    dow: PropTypes.array,\r\n    onChange: PropTypes.func,\r\n    firstDayOfWeek: PropTypes.string,\r\n};\r\n\r\nexport default withStyles(styles)(DayOfWeekPanel);\r\n","export default __webpack_public_path__ + \"static/media/day-night.d6f09cbf.jpg\";","import { withStyles } from '@material-ui/core';\r\nimport PropTypes from 'prop-types';\r\nimport { Component } from 'react';\r\nimport dayNight from '../assets/img/day-night.jpg';\r\n\r\nconst styles = {\r\n    dayNightCont: {\r\n        position: 'relative',\r\n        width: '100%',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        overflow: 'hidden',\r\n        transition: 'height 300ms ease-out',\r\n        '&>div': {\r\n            position: 'relative',\r\n        },\r\n        '&>div>.day_night':\r\n        {\r\n            width: '100%',\r\n            maxWidth: 550,\r\n            maxHeight: 90,\r\n        },\r\n        '&>div>img': {\r\n            width: '100%',\r\n            maxWidth: 550,\r\n            height: 'auto',\r\n            maxHeight: 90,\r\n        },\r\n    },\r\n    dayNightQoute: {\r\n        display: 'flex',\r\n        width: '100%',\r\n    },\r\n    dayNightSlide: {\r\n        display: 'flex',\r\n        width: '100%',\r\n        height: 'calc(100% - 9px)',\r\n        position: 'absolute',\r\n        border: '6px solid #FFF',\r\n        marginTop: -3,\r\n        transition: 'all 400ms ease-out',\r\n        '&::before': {\r\n            content: '\"\"',\r\n            position: 'absolute',\r\n            left: 'calc(-200% - 5px)',\r\n            top: -5,\r\n            height: 'calc(100% + 12px)',\r\n            width: '200%',\r\n            pointerEvents: 'none',\r\n            background: 'linear-gradient(to left,  rgba(255,255,255,1) 0%,rgba(255,255,255,0) 99%,rgba(255,255,255,0) 100%)',\r\n            filter: \"progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#00ffffff',GradientType=0 )\",\r\n\r\n        },\r\n        '&::after': {\r\n            content: '\"\"',\r\n            position: 'absolute',\r\n            right: 'calc(-200% - 5px)',\r\n            top: -5,\r\n            height: 'calc(100% + 12px)',\r\n            width: '200%',\r\n            pointerEvents: 'none',\r\n            background: 'linear-gradient(to right,  rgba(255,255,255,1) 0%,rgba(255,255,255,0) 99%,rgba(255,255,255,0) 100%)',\r\n            filter: \"progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#00ffffff',GradientType=0 )\",\r\n\r\n        },\r\n    },\r\n\r\n    dn: {\r\n        width: '100%',\r\n        maxWidth: 550,\r\n        // height: 'auto',\r\n        maxHeight: 90,\r\n        height: '100%',\r\n        position: 'absolute',\r\n        top: 0,\r\n        left: 0,\r\n        display: 'flex',\r\n    },\r\n};\r\nclass DayNightSwitcher extends Component {\r\n    onSlide = quorteId => {\r\n        if (this.props.onChange) {\r\n            this.props.onChange(quorteId);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { sections } = this.props;\r\n        const {\r\n            dayNightCont, dayNightSlide, dayNightQoute, dn,\r\n        } = this.props.classes;\r\n        const height = sections === 1 ? 0 : 78;\r\n        const region = 100 / sections;\r\n        const quortes = Array(sections).fill().map((_, i) => (\r\n            <div\r\n                key={i}\r\n                className={dayNightQoute}\r\n                onClick={() => this.onSlide(i)}\r\n            />\r\n        ));\r\n        return (\r\n            <div className={dayNightCont} style={{ height }}>\r\n                <div>\r\n                    <img src={dayNight} alt=\"day-night\" id=\"day-night\" />\r\n                    <div className={dn}>\r\n                        {quortes}\r\n                        <div\r\n                            className={dayNightSlide}\r\n                            style={{\r\n                                maxWidth: `${region}%`,\r\n                                width: `${region}%`,\r\n                                left: `calc(${this.props.quorteId * region}% - 5px)`,\r\n                            }}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nDayNightSwitcher.propTypes = {\r\n    onChange: PropTypes.func,\r\n    quorteId: PropTypes.number,\r\n    sections: PropTypes.number,\r\n};\r\nexport default withStyles(styles)(DayNightSwitcher);\r\n","import PropTypes from 'prop-types';\r\nimport { Component } from 'react';\r\nimport { withStyles, makeStyles } from '@material-ui/core/styles';\r\nimport Slider from '@material-ui/core/Slider';\r\nimport minmax from '../data/minmax.json';\r\n\r\nconst styles = () => ({\r\n    pretto: {\r\n        position: 'relative',\r\n        height: '100%',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        width: props => props.intervalsWidth,\r\n        // padding:\"0 3px\"\r\n    },\r\n    prettoLabel: {\r\n        color: '#6c7a93',\r\n        fontWeight: 700,\r\n        fontSize: '.9rem',\r\n        height: 30,\r\n        width: 'calc(100% - 5px)',\r\n        textAlign: 'center',\r\n    },\r\n    prettoTime: {\r\n        position: 'absolute',\r\n        fontSize: '0.9rem',\r\n        fontWeight: 700,\r\n        bottom: 27,\r\n        width: 'calc(100% - 5px)',\r\n        borderRadius: '4px',\r\n        height: 28,\r\n        maxHeight: 28,\r\n        minHeight: 28,\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        cursor: 'pointer',\r\n\r\n    },\r\n    active: {\r\n        backgroundColor: props => props.theme.palette.primary.light,\r\n        color: '#FFF',\r\n    },\r\n    prettoSecs: {\r\n        fontSize: '0.6rem',\r\n        fontWeight: 100,\r\n        color: props => props.theme.palette.text.primary,\r\n    },\r\n});\r\nconst usePrettoSliderStyles = makeStyles({\r\n    root: props => ({\r\n        color: props.theme.palette.primary.light,\r\n        borderRadius: 0,\r\n        transition: 'all 100ms ease-out',\r\n        position: 'relative',\r\n        '&&': {\r\n            width: `${props.intervalsWidth}px`,\r\n            padding: '0',\r\n            height: 'calc(100% - 90px)',\r\n        },\r\n    }),\r\n    thumb: props => ({\r\n        left: `calc( 50% + ${10}px)`,\r\n        width: 0,\r\n        height: 0,\r\n        display: props.type === 'onoff' ? 'none' : 'flex',\r\n    }),\r\n    active: {\r\n        backgroundColor: 'transparent',\r\n        width: 0,\r\n        height: 0,\r\n    },\r\n    valueLabel: props => ({\r\n        left: -20,\r\n        '& *': {\r\n            background: 'transparent',\r\n            fontWeight: 100,\r\n            color: props.theme.palette.text.primary,\r\n            fontSize: '1.0rem',\r\n            transition: 'all 100ms ease-out',\r\n        },\r\n    }),\r\n    track: {\r\n        transition: 'all 100ms ease-out',\r\n        borderRadius: 4,\r\n        '&&': {\r\n            width: 'calc(100% - 5px)',\r\n        },\r\n    },\r\n    rail: props => ({\r\n        transition: 'all 100ms ease-out',\r\n        borderRadius: 4,\r\n        height: 'calc(100% + 90px)',\r\n        backgroundColor: props.theme.palette.primary.light,\r\n        '&&': {\r\n            width: 'calc(100% - 5px)',\r\n            borderBottomLeftRadius: '0px',\r\n            borderBottomRightRadius: '0px',\r\n        },\r\n    }),\r\n});\r\n\r\nconst PrettoSlider = props => {\r\n    const componentProps = { ...props };\r\n    delete componentProps.intervalsWidth;\r\n    delete componentProps.type;\r\n    delete componentProps.theme;\r\n    return (\r\n        <Slider\r\n            classes={\r\n                usePrettoSliderStyles({\r\n                    intervalsWidth: props.intervalsWidth,\r\n                    type: props.type,\r\n                    theme: props.theme,\r\n                })\r\n            }\r\n            {...componentProps}\r\n        />\r\n    );\r\n};\r\nclass Interval extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            intervalsWidth: props.intervalsWidth,\r\n        };\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if (prevProps.intervalsWidth !== this.props.intervalsWidth) {\r\n            this.setState({\r\n                intervalsWidth: this.props.intervalsWidth,\r\n            });\r\n        }\r\n    }\r\n\r\n    handleSliderChange = (event, data) => {\r\n        this.on('data', data);\r\n    }\r\n\r\n    handleSelected = () => {\r\n        this.on('selected', !this.props.selected);\r\n    }\r\n\r\n    on = (field, value) => {\r\n        if (this.props.on) {\r\n            this.props.on(field, value, this.props.i);\r\n        }\r\n    }\r\n\r\n    getPostfix(value) {\r\n        switch (this.props.type) {\r\n        case 'temperature':\r\n            return `${value.toString()}º`;\r\n        case 'onoff':\r\n            return value\r\n                ? <span style={this.props.theme.palette.text.success}>on</span>\r\n                : <span style={this.props.theme.palette.text.danger}>off</span>;\r\n        case 'percent':\r\n        default:\r\n            return `${value.toString()}%`;\r\n        }\r\n    }\r\n\r\n    getMinMax() {\r\n        return minmax[this.props.type];\r\n    }\r\n\r\n    getLabel = () => {\r\n        const { step, i } = this.props;\r\n        const label = i * step;\r\n        const hrs = parseInt(label);\r\n        const secs = (`0${(label % 1) * 60}`).slice(-2);\r\n        return [hrs, secs];\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            value, i, selected, theme, type,\r\n        } = this.props;\r\n        const { intervalsWidth } = this.state;\r\n        const {\r\n            pretto, prettoLabel, prettoTime, active, prettoSecs,\r\n        } = this.props.classes;\r\n        if (i < 0) {\r\n            return '';\r\n        }\r\n        const { min, max } = this.getMinMax();\r\n        const label = this.getLabel();\r\n        const val = !value ? 0 : value;\r\n        const vl = type === 'onoff' ? this.getPostfix(val || 0) : '';\r\n        const v2 = type !== 'onoff' ? this.getPostfix(val || 0) : '';\r\n        return (\r\n            <span className={pretto}>\r\n                <span className={prettoLabel}>\r\n                    {vl}\r\n                </span>\r\n                <PrettoSlider\r\n                    key={i}\r\n                    theme={theme}\r\n                    intervalsWidth={intervalsWidth}\r\n                    type={type}\r\n                    orientation=\"vertical\"\r\n                    aria-label=\"pretto slider\"\r\n                    value={val}\r\n                    valueLabelFormat={v2}\r\n                    min={min}\r\n                    max={max}\r\n                    selected={selected}\r\n                    onChange={this.handleSliderChange}\r\n                    valueLabelDisplay=\"on\"\r\n                />\r\n                <div\r\n                    className={\r\n                        `${prettoTime} ${\r\n                            selected ? active : ''}`\r\n                    }\r\n                    i={i}\r\n                    onClick={this.handleSelected}\r\n                >\r\n                    <span style={{ color: this.props.theme.palette.text.primary }}>{label[0]}</span>\r\n                    <span className={prettoSecs}>\r\n                        {label[1]}\r\n                    </span>\r\n\r\n                </div>\r\n            </span>\r\n        );\r\n    }\r\n}\r\n\r\nInterval.propTypes = {\r\n    i: PropTypes.number,\r\n    intervalsWidth: PropTypes.number,\r\n    on: PropTypes.func,\r\n    selected: PropTypes.bool,\r\n    step: PropTypes.number,\r\n    theme: PropTypes.object,\r\n    type: PropTypes.string,\r\n    value: PropTypes.number,\r\n};\r\nexport default withStyles(styles)(Interval);\r\n","import { withStyles } from '@material-ui/core';\r\nimport PropTypes from 'prop-types';\r\nimport React, { Component } from 'react';\r\nimport DayNightSwitcher from './DayNightSwitcher';\r\nimport Interval from './Interval';\r\n\r\nconst styles = theme => ({\r\n    swiperContent: {\r\n        width: '100%',\r\n        height: '100%',\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        '@media (max-width:570px)': {\r\n            justifyContent: 'center',\r\n        },\r\n    },\r\n    swiper: {\r\n        width: '100%',\r\n        height: '100%',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        marginTop: 15,\r\n        position: 'relative',\r\n    },\r\n    timeLineContainer: {\r\n        position: 'absolute',\r\n        height: '100%',\r\n    },\r\n    timeLine: {\r\n        zIndex: 100,\r\n        borderWidth: 1,\r\n        borderColor: theme.palette.text.primary,\r\n        borderLeftStyle: 'dashed',\r\n        width: 4,\r\n        height: 'calc(100% - 20px)',\r\n        position: 'relative',\r\n    },\r\n});\r\n\r\nclass Intervals extends Component {\r\n    timeInterval = null;\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            slideId: 0,\r\n            selected: [],\r\n            intervalsWidth: props.intervalsWidth,\r\n            key: parseInt(Date.now() + Math.random() * 1000),\r\n            currentTime: new Date(),\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.timeInterval = setInterval(() => this.setState({ currentTime: new Date() }), 1000 * 120);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        clearInterval(this.timeInterval);\r\n        this.timeInterval = null;\r\n    }\r\n\r\n    componentDidUpdate(nextProps) {\r\n        if (nextProps.range !== this.props.range) {\r\n            this.setState({\r\n                slideId: 0,\r\n            });\r\n        }\r\n        if (this.props.intervalsWidth && nextProps.intervalsWidth !== this.props.intervalsWidth) {\r\n            // console.log(nextProps.intervalsWidth, this.props.intervalsWidth)\r\n            // setTimeout(() => {\r\n            this.setState({\r\n                intervalsWidth: this.props.intervalsWidth + Math.random(),\r\n                key: parseInt(Date.now() + Math.random() * 1000),\r\n            });\r\n            // }, 1)\r\n        }\r\n    }\r\n\r\n    getSectionByRange = range => {\r\n        if (this.props.intervalsWidth >= 720) {\r\n            return range === 0.5 ? 2 : 1;\r\n        }\r\n        switch (range) {\r\n        case 0.5:\r\n            return 8;\r\n        case 1:\r\n            return 4;\r\n        case 2:\r\n            return 3;\r\n        case 4:\r\n            return 1;\r\n        case 3:\r\n        default:\r\n            return 2;\r\n        }\r\n    }\r\n\r\n    getCountByRange = range => {\r\n        if (this.state.intervalsWidth >= 720) {\r\n            return range === 0.5 ? 24 : this.getMaxByRange(range);\r\n        }\r\n        switch (range) {\r\n        case 0.5:\r\n            return 6;\r\n        case 1:\r\n            return 6;\r\n        case 2:\r\n            return 4;\r\n        case 4:\r\n            return 6;\r\n        case 3:\r\n        default:\r\n            return 4;\r\n        }\r\n    }\r\n\r\n    getMaxByRange = range => 24 / range\r\n\r\n    prev = () => {\r\n        const { slideId } = this.state;\r\n        const { range } = this.props;\r\n        if (slideId > 0) this.setSlideId(slideId - 1);\r\n        else this.setSlideId(this.getSectionByRange(range) - 1);\r\n    }\r\n\r\n    next = () => {\r\n        const { slideId } = this.state;\r\n        const { range } = this.props;\r\n        if (slideId < this.getSectionByRange(range) - 1) this.setSlideId(slideId + 1);\r\n        else this.setSlideId(0);\r\n    }\r\n\r\n    selectAll = () => {\r\n        const { range } = this.props;\r\n        this.setState({ selected: Array(this.getMaxByRange(range) + 1).fill(1).map((e, i) => i) });\r\n    }\r\n\r\n    selectNone = () => {\r\n        this.setState({ selected: [] });\r\n    }\r\n\r\n    setSlideId = slideId => {\r\n        this.setState({ slideId: parseInt(slideId) });\r\n    }\r\n\r\n    onChange = (field, value, i) => {\r\n        const { selected } = this.state;\r\n        const state = JSON.parse(JSON.stringify(this.state));\r\n        if (field === 'selected') {\r\n            state[field][i] = value;\r\n            this.setState(state);\r\n        }\r\n        if (field === 'data') {\r\n            const data = JSON.parse(JSON.stringify(this.props.data));\r\n            const inSelected = selected[i];\r\n            if (!inSelected) {\r\n                this.setState({ selected: [] });\r\n            }\r\n            if (!inSelected || selected.filter(e => e).length === 0) {\r\n                data[i] = value;\r\n            } else {\r\n                data.forEach((element, index) => {\r\n                    if (selected[index]) {\r\n                        data[index] = value;\r\n                    }\r\n                });\r\n            }\r\n            this.props.onChange(data);\r\n        }\r\n    }\r\n\r\n    getSlide() {\r\n        const {\r\n            intervalsWidth, slideId, selected, key,\r\n        } = this.state;\r\n        const {\r\n            type, theme, range, data, classes,\r\n        } = this.props;\r\n        const count = this.getCountByRange(range);\r\n\r\n        const sliders = [];\r\n        for (let i = slideId * count; i < (slideId + 1) * count; i++) {\r\n            sliders.push(\r\n                <Interval\r\n                    key={`${i}step${range}${key}`}\r\n                    value={data[i]}\r\n                    selected={selected[i]}\r\n                    label=\"\"\r\n                    i={i}\r\n                    step={range}\r\n                    on={this.onChange}\r\n                    type={type}\r\n                    theme={theme}\r\n                    intervalsWidth={intervalsWidth / count}\r\n                />,\r\n            );\r\n        }\r\n\r\n        const leftOffset = Math.round(\r\n            (((this.state.currentTime.getHours() + this.state.currentTime.getMinutes() / 60) / range - count * slideId) / count) * intervalsWidth,\r\n        );\r\n\r\n        return <>\r\n            <div className={classes.timeLineContainer}>\r\n                <div\r\n                    className={classes.timeLine}\r\n                    style={{ left: leftOffset }}\r\n                />\r\n            </div>\r\n            {sliders}\r\n        </>;\r\n    }\r\n\r\n    onSwipeLeftListener = () => {\r\n        this.prev();\r\n    }\r\n\r\n    onSwipeRightListener = () => {\r\n        this.next();\r\n    }\r\n\r\n    render() {\r\n        if (!this.state.intervalsWidth) {\r\n            return null;\r\n        }\r\n        const { slideId } = this.state;\r\n        const { range } = this.props;\r\n        const { swiperContent, swiper } = this.props.classes;\r\n        const sections = this.getSectionByRange(range);\r\n        return <>\r\n            <div className={swiperContent}>\r\n                <div className={swiper}>\r\n                    {this.getSlide()}\r\n                </div>\r\n            </div>\r\n            <DayNightSwitcher\r\n                sections={sections}\r\n                quorteId={parseInt(slideId)}\r\n                onChange={quorteId => this.setSlideId(quorteId)}\r\n            />\r\n        </>;\r\n    }\r\n}\r\n\r\nIntervals.propTypes = {\r\n    data: PropTypes.array,\r\n    intervalsWidth: PropTypes.number,\r\n    onChange: PropTypes.func,\r\n    range: PropTypes.number,\r\n    theme: PropTypes.object,\r\n    type: PropTypes.string,\r\n};\r\nexport default withStyles(styles)(Intervals);\r\n","import PropTypes from 'prop-types';\r\nimport React, { Component } from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Intervals from './Intervals';\r\n\r\nconst styles = () => ({\r\n    tapperGrid: {\r\n        margin: 0,\r\n        boxShadow: 'none',\r\n        borderRadius: 0,\r\n        alignItems: 'center',\r\n        padding: 10,\r\n        '@media (max-width:570px)':\r\n        {\r\n            margin: 0,\r\n            boxShadow: 'none',\r\n            borderRadius: 0,\r\n            alignItems: 'center',\r\n            padding: '0px 10px 0 60px',\r\n        },\r\n    },\r\n    tapperInside: {\r\n        overflow: 'hidden',\r\n        height: '100%',\r\n        flexGrow: 1,\r\n        position: 'relative',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'center',\r\n    },\r\n});\r\n\r\nclass IntervalsContainer extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.tapperRef = React.createRef();\r\n        this.state = {};\r\n    }\r\n\r\n    componentDidMount() {\r\n        window.addEventListener('resize', this.updateWindowDimensions);\r\n        this.updateWindowDimensions();\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if (prevProps.range !== this.props.range) {\r\n            this.updateWindowDimensions();\r\n        }\r\n        if (prevProps.windowWidth !== this.props.windowWidth) {\r\n            this.updateWindowDimensions();\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('resize', this.updateWindowDimensions);\r\n    }\r\n\r\n    updateWindowDimensions = () => {\r\n        const w = this.tapperRef.current.getBoundingClientRect().width;\r\n        this.setState({\r\n            intervalsWidth: w || 30,\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            type, theme, range, intervals,\r\n        } = this.props;\r\n        const { tapperGrid, tapperInside } = this.props.classes;\r\n        // console.log(this.state.intervalsWidth);\r\n        return (\r\n            <div\r\n                className={`${tapperGrid} m-1 h-100 `}\r\n                style={{\r\n                    backgroundColor: theme.palette.background.default,\r\n                }}\r\n            >\r\n                <div\r\n                    className={tapperInside}\r\n                    id=\"tapper-inside\"\r\n                    ref={this.tapperRef}\r\n                    style={{\r\n                        padding: 0,\r\n                        width: '100%',\r\n                    }}\r\n                >\r\n                    <Intervals\r\n                        data={intervals}\r\n                        onChange={this.props.onChange}\r\n                        theme={theme}\r\n                        type={type}\r\n                        range={range}\r\n                        intervalsWidth={this.state.intervalsWidth}\r\n                    />\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nIntervalsContainer.propTypes = {\r\n    intervals: PropTypes.array,\r\n    onChange: PropTypes.func,\r\n    range: PropTypes.number,\r\n    theme: PropTypes.object,\r\n    type: PropTypes.string,\r\n};\r\nexport default withStyles(styles)(IntervalsContainer);\r\n","import PropTypes from 'prop-types';\r\nimport React, { Component } from 'react';\r\nimport {\r\n    FormControl, FormLabel, MenuItem, Select,\r\n} from '@material-ui/core';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\n\r\nconst styles = {\r\n    tapperTitle: {\r\n        fontSize: '1.3rem',\r\n        textTransform: 'uppercase',\r\n        paddingBottom: '1rem',\r\n    },\r\n};\r\nclass PriorityPanel extends Component {\r\n    on = evt => {\r\n        const priority = evt.target.value;\r\n        this.props.onChange(priority);\r\n    }\r\n\r\n    render() {\r\n        const { priority } = this.props;\r\n        return (\r\n            <FormControl component=\"fieldset\" className=\"w-100\">\r\n                <FormLabel component=\"legend\" className={this.props.classes.tapperTitle}>\r\n                    {I18n.t('Priority')}\r\n                </FormLabel>\r\n                <Select\r\n                    labelId=\"demo-simple-select-label\"\r\n                    id=\"demo-simple-select\"\r\n                    className=\"w-100\"\r\n                    value={priority}\r\n                    onChange={this.on}\r\n                >\r\n                    <MenuItem value={0}>\r\n                        {I18n.t('Normal')}\r\n                    </MenuItem>\r\n                    <MenuItem value={1}>\r\n                        &#8593;\r\n                        {I18n.t('High')}\r\n                    </MenuItem>\r\n                    <MenuItem value={2}>\r\n                        &#8593;&#8593;\r\n                        {I18n.t('Highest eg. Holiday')}\r\n                    </MenuItem>\r\n                </Select>\r\n            </FormControl>\r\n        );\r\n    }\r\n}\r\n\r\nPriorityPanel.propTypes = {\r\n    onChange: PropTypes.func,\r\n    priority: PropTypes.number,\r\n};\r\nexport default withStyles(styles)(PriorityPanel);\r\n","import PropTypes from 'prop-types';\r\nimport React, { Component } from 'react';\r\nimport {\r\n    FormControl, FormLabel, MenuItem, Select, withStyles,\r\n} from '@material-ui/core';\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\n\r\nconst styles = () => ({\r\n    tapperInside: {\r\n        overflow: 'hidden',\r\n        height: '100%',\r\n        flexGrow: 1,\r\n        position: 'relative',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'center',\r\n    },\r\n    tapperTitle: {\r\n        fontSize: '1.3rem',\r\n        textTransform: 'uppercase',\r\n        paddingBottom: '1rem',\r\n    },\r\n});\r\n\r\nclass TypePanel extends Component {\r\n    on = evt => {\r\n        const type = evt.target.value;\r\n        this.props.onChange(type);\r\n    }\r\n\r\n    render() {\r\n        const { type } = this.props;\r\n        return (\r\n            <FormControl component=\"fieldset\" className=\"w-100\">\r\n                <FormLabel component=\"legend\" className={this.props.classes.tapperTitle}>\r\n                    {I18n.t('Type')}\r\n                </FormLabel>\r\n                <Select\r\n                    labelId=\"type-select-label\"\r\n                    id=\"type-select\"\r\n                    className=\"w-100\"\r\n                    value={type}\r\n                    onChange={this.on}\r\n                >\r\n                    <MenuItem value=\"percent\">\r\n                        {I18n.t('Percent')}\r\n                    </MenuItem>\r\n                    <MenuItem value=\"temperature\">\r\n                        {I18n.t('Temperature')}\r\n                    </MenuItem>\r\n                    <MenuItem value=\"onoff\">\r\n                        {I18n.t('On/Off')}\r\n                    </MenuItem>\r\n                </Select>\r\n            </FormControl>\r\n        );\r\n    }\r\n}\r\n\r\nTypePanel.propTypes = {\r\n    onChange: PropTypes.func,\r\n    type: PropTypes.string,\r\n};\r\nexport default withStyles(styles)(TypePanel);\r\n","import React, { Component, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\nimport { DndProvider, useDrag, useDrop } from 'react-dnd';\r\nimport { getEmptyImage, HTML5Backend } from 'react-dnd-html5-backend';\r\nimport { TouchBackend } from 'react-dnd-touch-backend';\r\nimport { usePreview } from 'react-dnd-preview';\r\n\r\nimport {\r\n    Button,\r\n    Dialog,\r\n    DialogTitle,\r\n    Divider,\r\n    IconButton,\r\n    InputAdornment,\r\n    MenuItem,\r\n    MenuList,\r\n    Typography,\r\n    TextField,\r\n    Paper,\r\n    DialogContent, DialogActions, Checkbox, Tooltip,\r\n} from '@material-ui/core';\r\n\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport FileCopyIcon from '@material-ui/icons/FileCopy';\r\nimport CreateNewFolderIcon from '@material-ui/icons/CreateNewFolder';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport ScheduleIcon from '@material-ui/icons/Schedule';\r\nimport UnfoldLessIcon from '@material-ui/icons/UnfoldLess';\r\nimport UnfoldMoreIcon from '@material-ui/icons/UnfoldMore';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport FolderIcon from '@iobroker/adapter-react/icons/IconClosed';\r\nimport FolderOpenIcon from '@iobroker/adapter-react/icons/IconOpen';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\n\r\nconst defaultProfileData = {\r\n    enabled: true,\r\n    members: [],\r\n    type: 'temperature',\r\n    prio: 0, // 0 normal, 1 - high, 2 - highest\r\n    dow: [1, 2, 3, 4, 5], // 0 - sunday, 1 - monday\r\n    intervalDuration: 1, // in hours\r\n    intervals: Array(24).fill(22),\r\n};\r\n\r\nconst DndPreview = () => {\r\n    const { display/* , itemType */, item, style } = usePreview();\r\n    if (!display) {\r\n        return null;\r\n    }\r\n    return <div style={{ zIndex: 10000, ...style }}>{item.preview}</div>;\r\n};\r\n\r\nfunction isTouchDevice() {\r\n    return 'ontouchstart' in window\r\n        // || (navigator.maxTouchPoints > 0)\r\n        || navigator.msMaxTouchPoints;\r\n}\r\n\r\nconst styles = theme => ({\r\n    closeButton: {\r\n        position: 'absolute',\r\n        top: 5,\r\n        right: 5,\r\n    },\r\n    scrolledAuto: {\r\n        overflowX: 'hidden',\r\n        overflowY: 'auto',\r\n        flexGrow: 1000,\r\n        width: 'calc(100% - 30px)',\r\n        margin: 0,\r\n    },\r\n    tapperTitle: {\r\n        fontSize: '1.3rem',\r\n        textTransform: 'uppercase',\r\n        paddingBottom: '1rem',\r\n    },\r\n    editButton:\r\n    {\r\n        width: 30,\r\n        height: 30,\r\n        display: 'none',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        marginRight: 2,\r\n        '&:active':\r\n        {\r\n            color: '#EEE',\r\n        },\r\n        '&>svg':\r\n        {\r\n            fontSize: '1.2rem',\r\n        },\r\n        '.flow-menu-item:hover &':\r\n        {\r\n            display: 'flex',\r\n        },\r\n        '.flow-menu-item.active &':\r\n        {\r\n            display: 'flex',\r\n        },\r\n    },\r\n    dndHover:\r\n        {\r\n            backgroundColor: () => theme.palette.primary.dark,\r\n            color: theme.palette.grey[200],\r\n        },\r\n    flowMenuItem: {\r\n        height: 28,\r\n        maxHeight: 28,\r\n        minHeight: 28,\r\n        padding: 0,\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        cursor: 'pointer',\r\n        position: 'relative',\r\n        '&.active':\r\n        {\r\n            backgroundColor: () => theme.palette.primary.light,\r\n            color: '#FFF',\r\n        },\r\n        '&:hover':\r\n        {\r\n            backgroundColor: () => theme.palette.primary.dark,\r\n            color: theme.palette.grey[200],\r\n        },\r\n        '&::before':\r\n        {\r\n            width: 20,\r\n            height: 20,\r\n        },\r\n    },\r\n    active: {\r\n\r\n    },\r\n    head: {\r\n        height: 32,\r\n        display: 'flex',\r\n        marginRight: 20,\r\n        boxShadow: 'none',\r\n    },\r\n    divide: {\r\n        marginRight: 20,\r\n        marginTop: 8,\r\n    },\r\n    searchIcon: {\r\n        marginLeft: 'auto',\r\n    },\r\n    folderIcon: {\r\n        paddingRight: 4,\r\n    },\r\n    scheduleIcon: {\r\n        paddingRight: 4,\r\n        width: 16,\r\n        height: 16,\r\n        marginTop: 4,\r\n    },\r\n});\r\n\r\nfunction canDrop(childId, parentId, profiles) {\r\n    const child = profiles.find(profile => profile.id === childId);\r\n    if (!child.parent && !parentId) {\r\n        return false;\r\n    }\r\n    if (!parentId) {\r\n        return true;\r\n    }\r\n    if (child.parent === parentId) {\r\n        return false;\r\n    }\r\n\r\n    let foundParent = profiles.find(profile => profile.id === parentId);\r\n    while (foundParent.parent) {\r\n        if (foundParent.parent === childId) {\r\n            return false;\r\n        }\r\n        foundParent = foundParent.parent;\r\n    }\r\n    return true;\r\n}\r\n\r\nconst ProfileDrag = props => {\r\n    const [, dragRef, preview] = useDrag(\r\n        {\r\n            type: 'profile',\r\n            item: () => ({ profileId: props.profileData.id, preview: props.children }),\r\n            end: (item, monitor) => {\r\n                const dropResult = monitor.getDropResult();\r\n                if (item && dropResult) {\r\n                    props.onMoveItem(item.profileId, dropResult.folderId);\r\n                }\r\n            },\r\n            collect: monitor => ({\r\n                isDragging: monitor.isDragging(),\r\n                handlerId: monitor.getHandlerId(),\r\n            }),\r\n        },\r\n    );\r\n    useEffect(() => {\r\n        preview(getEmptyImage(), { captureDraggingState: true });\r\n    }, []);\r\n\r\n    return <div ref={dragRef}>\r\n        {props.children}\r\n    </div>;\r\n};\r\n\r\nfunction sortItems(a, b) {\r\n    // folders first\r\n    if (a.type === 'folder' && b.type !== 'folder') {\r\n        return -1;\r\n    }\r\n\r\n    if (a.type !== 'folder' && b.type === 'folder') {\r\n        return 1;\r\n    }\r\n\r\n    return a.title > b.title ? 1 : (a.title < b.title ? -1 : 0);\r\n}\r\n\r\nconst FolderDrop = props => {\r\n    const [{ isOver, CanDrop }, drop] = useDrop(() => ({\r\n        accept: 'profile',\r\n        drop: () => ({ folderId: props.folderData.id }),\r\n        canDrop: (item, monitor) => canDrop(monitor.getItem().profileId, props.folderData.id, props.profiles),\r\n        collect: monitor => ({\r\n            isOver: monitor.isOver(),\r\n            CanDrop: monitor.canDrop(),\r\n        }),\r\n    }), [props.profiles]);\r\n\r\n    return <div\r\n        ref={drop}\r\n        className={CanDrop && isOver ? props.classes.dndHover : null}\r\n    >\r\n        {props.children}\r\n    </div>;\r\n};\r\n\r\nclass ProfilesPanel extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        let collapsed = window.localStorage.getItem('scheduler.collapsed') || '[]';\r\n        try {\r\n            collapsed = JSON.parse(collapsed);\r\n        } catch (e) {\r\n            collapsed = [];\r\n        }\r\n\r\n        this.state = {\r\n            isDialogOpen: false,\r\n            isSearch: false,\r\n            searchText: '',\r\n            collapsed,\r\n        };\r\n\r\n        this.isTouchDevice = isTouchDevice();\r\n    }\r\n\r\n    onActive = id => {\r\n        this.props.onSelectProfile(id);\r\n    }\r\n\r\n    onDialogClose = () => {\r\n        this.setState({\r\n            isDialogOpen: false,\r\n            dialogElementTitle: '',\r\n            dialogElementId: '',\r\n            dialogElementParent: null,\r\n            duplicate: false,\r\n            isNew: false,\r\n        });\r\n    }\r\n\r\n    onEditDialog = element => {\r\n        this.setState(\r\n            {\r\n                isDialogOpen: true,\r\n                dialogElementTitle: element.title,\r\n                dialogElementId: element.id,\r\n                dialogElementParent: element.parent,\r\n                dialogElementType: element.type,\r\n                isNew: false,\r\n            },\r\n        );\r\n    }\r\n\r\n    onUpdateItem = () => {\r\n        const newProfiles = JSON.parse(JSON.stringify(this.props.profiles));\r\n        if (this.state.isNew) {\r\n            newProfiles.push({\r\n                id: this.state.dialogElementId,\r\n                title: this.state.dialogElementTitle,\r\n                parent: this.state.dialogElementParent,\r\n                type: this.state.dialogElementType,\r\n                data: { state: true, ...defaultProfileData },\r\n            });\r\n        } else if (this.state.duplicate) {\r\n            const newProfile = JSON.parse(JSON.stringify(newProfiles.find(foundProfile => foundProfile.id === this.state.duplicate)));\r\n            newProfile.id = this.state.dialogElementId;\r\n            newProfile.title = this.state.dialogElementTitle;\r\n            newProfiles.push(newProfile);\r\n        } else {\r\n            const profile = newProfiles.find(foundProfile => foundProfile.id === this.state.dialogElementId);\r\n            profile.title = this.state.dialogElementTitle;\r\n        }\r\n\r\n        this.setState({ isDialogOpen: false, isNew: false });\r\n        this.props.onChangeProfiles(newProfiles);\r\n    }\r\n\r\n    removeItem(profiles, id) {\r\n        profiles.forEach(e => {\r\n            if (e.id === id) {\r\n                e.toDelete = true;\r\n                // remove all kids\r\n                profiles.forEach(ee => {\r\n                    if (e.id === ee.parent) {\r\n                        this.removeItem(profiles, ee.id);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    onDeleteItem = () => {\r\n        const profiles = JSON.parse(JSON.stringify(this.props.profiles));\r\n        this.removeItem(profiles, this.state.dialogElementId);\r\n        const newProfiles = [];\r\n\r\n        profiles.forEach(e => {\r\n            if (!e.toDelete) {\r\n                newProfiles.push(e);\r\n            }\r\n        });\r\n\r\n        this.setState({ isDialogOpen: false, isNew: false });\r\n        this.props.onChangeProfiles(newProfiles);\r\n    }\r\n\r\n    onMoveItem = (profileId, newParentId) => {\r\n        const newProfiles = JSON.parse(JSON.stringify(this.props.profiles));\r\n        const profile = newProfiles.find(foundProfile => foundProfile.id === profileId);\r\n        profile.parent = newParentId;\r\n        // check name\r\n        if (newProfiles\r\n            .filter(item => item !== profile)\r\n            .filter(item => ((!profile.parent && !item.parent) || profile.parent === item.parent))\r\n            .find(item => item.title === profile.title)) {\r\n            profile.title += ` (${I18n.t('copy')})`;\r\n        }\r\n\r\n        this.props.onChangeProfiles(newProfiles);\r\n    }\r\n\r\n    onAddChild = (element, type) => {\r\n        this.setState(\r\n            {\r\n                isDialogOpen: true,\r\n                dialogElementTitle: I18n.t(type),\r\n                dialogElementType: type,\r\n                dialogElementId: uuidv4(),\r\n                dialogElementParent: element.id,\r\n                isNew: true,\r\n            },\r\n        );\r\n    }\r\n\r\n    onDuplicate = source => {\r\n        this.setState(\r\n            {\r\n                isDialogOpen: true,\r\n                dialogElementTitle: `${source.title} ${I18n.t('copy')}`,\r\n                dialogElementType: source.type,\r\n                dialogElementId: uuidv4(),\r\n                dialogElementParent: source.parent,\r\n                duplicate: source.id,\r\n                isNew: false,\r\n            },\r\n        );\r\n    }\r\n\r\n    onOpen = id => {\r\n        const collapsed = [...this.state.collapsed];\r\n        const pos = collapsed.indexOf(id);\r\n        if (pos === -1) {\r\n            collapsed.push(id);\r\n            collapsed.sort();\r\n        } else {\r\n            collapsed.splice(pos, 1);\r\n        }\r\n        window.localStorage.setItem('scheduler.collapsed', JSON.stringify(collapsed));\r\n        this.setState({ collapsed });\r\n    }\r\n\r\n    onCloseAll = () => {\r\n        const collapsed = this.props.profiles.filter(item => item.type === 'folder').map(item => item.id);\r\n        window.localStorage.setItem('scheduler.collapsed', JSON.stringify(collapsed));\r\n        this.setState({ collapsed });\r\n    }\r\n\r\n    onOpenAll = () => {\r\n        window.localStorage.removeItem('scheduler.collapsed');\r\n        this.setState({ collapsed: [] });\r\n    }\r\n\r\n    onSetEnabled = profileId => {\r\n        const newProfiles = JSON.parse(JSON.stringify(this.props.profiles));\r\n        const profile = newProfiles.find(foundProfile => foundProfile.id === profileId);\r\n        profile.data.enabled = !profile.data.enabled;\r\n        this.props.onChangeProfiles(newProfiles);\r\n    }\r\n\r\n    folder = (folderItem, level, searchText) => {\r\n        const { profiles, active } = this.props;\r\n        const { flowMenuItem, editButton } = this.props.classes;\r\n\r\n        const isOpen = !this.state.collapsed.includes(folderItem.id);\r\n\r\n        const subProfiles = searchText ? null : profiles\r\n            .filter(e => e.parent === folderItem.id)\r\n            .sort(sortItems)\r\n            .map(sub => (isOpen\r\n                ? <div key={sub.id}>\r\n                    {\r\n                        sub.type === 'profile'\r\n                            ? this.profile(sub, level + 1, searchText)\r\n                            : this.folder(sub, level + 1, searchText)\r\n                    }\r\n                </div>\r\n                : null));\r\n\r\n        const folderSample = isOpen\r\n            ? <FolderOpenIcon\r\n                className={this.props.classes.folderIcon}\r\n                onClick={e => {\r\n                    this.onOpen(folderItem.id, false);\r\n                    e.stopPropagation();\r\n                }}\r\n            />\r\n            : <FolderIcon\r\n                className={this.props.classes.folderIcon}\r\n                onClick={e => {\r\n                    this.onOpen(folderItem.id, true);\r\n                    e.stopPropagation();\r\n                }}\r\n            />;\r\n\r\n        const result = <MenuItem\r\n            className={`${flowMenuItem} flow-menu-item ${active === folderItem.id ? ' active ' : ''}`}\r\n            style={{ marginLeft: (level * 12) }}\r\n            disableRipple\r\n        >\r\n            <Typography variant=\"inherit\" className=\"pl-1 w-100\">\r\n                {folderSample}\r\n                {' '}\r\n                {folderItem.title}\r\n            </Typography>\r\n\r\n            <div className=\"absolute-right\">\r\n                <div\r\n                    className={editButton}\r\n                    title={I18n.t('Add new child profile')}\r\n                    onClick={() => this.onAddChild(folderItem, 'profile')}\r\n                >\r\n                    <AddIcon />\r\n                </div>\r\n                <div\r\n                    className={editButton}\r\n                    title={I18n.t('Add new child folder')}\r\n                    onClick={() => this.onAddChild(folderItem, 'folder')}\r\n                >\r\n                    <CreateNewFolderIcon />\r\n                </div>\r\n                <div\r\n                    className={editButton}\r\n                    title={I18n.t('Edit')}\r\n                    onClick={() => this.onEditDialog(folderItem)}\r\n                >\r\n                    <EditIcon />\r\n                </div>\r\n            </div>\r\n\r\n        </MenuItem>;\r\n\r\n        return <div key={folderItem.id}>\r\n            <FolderDrop folderData={folderItem} profiles={this.props.profiles} classes={this.props.classes}>\r\n                <ProfileDrag onMoveItem={this.onMoveItem} profileData={folderItem}>\r\n                    {result}\r\n                </ProfileDrag>\r\n            </FolderDrop>\r\n            {subProfiles}\r\n        </div>;\r\n    }\r\n\r\n    profile = (profile, level, searchText) => {\r\n        const { active } = this.props;\r\n        const { flowMenuItem, editButton } = this.props.classes;\r\n\r\n        const result = <MenuItem\r\n            className={`${flowMenuItem} flow-menu-item sub ${active === profile.id ? ' active ' : ''}`}\r\n            style={{ marginLeft: (level * 12) }}\r\n            onClick={() => this.onActive(profile.id)}\r\n            disableRipple\r\n        >\r\n            <Typography variant=\"inherit\" className=\"pl-1 w-100\">\r\n                <ScheduleIcon className={this.props.classes.scheduleIcon} />\r\n                <Tooltip title={profile.data.enabled ? I18n.t('Enabled') : I18n.t('Disabled')}>\r\n                    <Checkbox\r\n                        color=\"default\"\r\n                        disabled={profile.data.state !== true}\r\n                        style={{ padding: 0 }}\r\n                        size=\"small\"\r\n                        onClick={() => this.onSetEnabled(profile.id)}\r\n                        checked={!!profile.data.enabled}\r\n                    />\r\n                </Tooltip>\r\n                {profile.title}\r\n                {profile.parent && searchText ? ` [${this.props.profiles.find(i => i.id === profile.parent).title}]` : ''}\r\n                {profile.data.prio === 1 ? <Tooltip title={I18n.t('High priority')}><span>&#8593;</span></Tooltip> : ''}\r\n                {profile.data.prio === 2 ? <Tooltip title={I18n.t('Highest priority')}><span>&#8593;&#8593;</span></Tooltip> : ''}\r\n            </Typography>\r\n\r\n            <div className=\"absolute-right\">\r\n                <div\r\n                    className={editButton}\r\n                    title={I18n.t('Edit')}\r\n                    onClick={e => {\r\n                        e.stopPropagation();\r\n                        this.onEditDialog(profile);\r\n                    }}\r\n                >\r\n                    <EditIcon />\r\n                </div>\r\n                <div\r\n                    className={editButton}\r\n                    title={I18n.t('Duplicate')}\r\n                    onClick={e => {\r\n                        e.stopPropagation();\r\n                        this.onDuplicate(profile);\r\n                    }}\r\n                >\r\n                    <FileCopyIcon />\r\n                </div>\r\n            </div>\r\n        </MenuItem>;\r\n\r\n        return <ProfileDrag key={profile.id} onMoveItem={this.onMoveItem} profileData={profile}>{result}</ProfileDrag>;\r\n    }\r\n\r\n    onSearch = () => {\r\n        this.setState({ isSearch: !this.state.isSearch, searchText: '' });\r\n    }\r\n\r\n    onSearchedText = evt => {\r\n        const text = evt.target.value;\r\n        this.setState({ searchText: text });\r\n    }\r\n\r\n    head = () => {\r\n        const { profiles } = this.props;\r\n        const result = this.state.isSearch\r\n            ? <>\r\n                <TextField\r\n                    className=\"ml-1 w-100\"\r\n                    placeholder={I18n.t('search text')}\r\n                    onChange={this.onSearchedText}\r\n                    InputProps={{\r\n                        endAdornment:\r\n                        <IconButton\r\n                            component=\"span\"\r\n                            size=\"small\"\r\n                            title={I18n.t('finish searching')}\r\n                            onClick={this.onSearch}\r\n                        >\r\n                            <CloseIcon />\r\n                        </IconButton>,\r\n                    }}\r\n                />\r\n            </>\r\n            : <>\r\n                <IconButton\r\n                    component=\"span\"\r\n                    size=\"small\"\r\n                    title={I18n.t('Add profile')}\r\n                    onClick={\r\n                        () => this.onAddChild({ id: '' }, 'profile')\r\n                    }\r\n                >\r\n                    <AddIcon />\r\n                </IconButton>\r\n                <IconButton\r\n                    component=\"span\"\r\n                    size=\"small\"\r\n                    title={I18n.t('Add folder')}\r\n                    onClick={\r\n                        () => this.onAddChild({ id: '' }, 'folder')\r\n                    }\r\n                >\r\n                    <CreateNewFolderIcon />\r\n                </IconButton>\r\n                {\r\n                    profiles.length ? (\r\n                        profiles.filter(e => e.type === 'folder' && !this.state.collapsed.includes(e.id)).length\r\n                            ? <IconButton\r\n                                component=\"span\"\r\n                                size=\"small\"\r\n                                title={I18n.t('Close all')}\r\n                                onClick={this.onCloseAll}\r\n                            >\r\n                                <UnfoldLessIcon />\r\n                            </IconButton>\r\n                            : <IconButton\r\n                                component=\"span\"\r\n                                size=\"small\"\r\n                                title={I18n.t('Open all')}\r\n                                onClick={this.onOpenAll}\r\n                            >\r\n                                <UnfoldMoreIcon />\r\n                            </IconButton>\r\n                    ) : null\r\n                }\r\n                <IconButton\r\n                    component=\"span\"\r\n                    size=\"small\"\r\n                    className={this.props.classes.searchIcon}\r\n                    title={I18n.t('Search')}\r\n                    onClick={this.onSearch}\r\n                >\r\n                    <SearchIcon />\r\n                </IconButton>\r\n            </>;\r\n\r\n        return <FolderDrop folderData={{ id: '' }} profiles={this.props.profiles} classes={this.props.classes}>\r\n            {result}\r\n        </FolderDrop>;\r\n    }\r\n\r\n    renderEditDeleteDialog() {\r\n        const { isDialogOpen } = this.state;\r\n        const folderItems = this.props.profiles.filter(profile => (!this.state.dialogElementParent && !profile.parent) || (this.state.dialogElementParent === profile.parent));\r\n\r\n        const canSubmit = this.state.dialogElementTitle\r\n            && !folderItems.find(profile => profile.title === this.state.dialogElementTitle);\r\n\r\n        return <Dialog\r\n            onClose={() => this.onDialogClose()}\r\n            open={isDialogOpen}\r\n            onKeyDown={e => {\r\n                if (e.keyCode === 13 && canSubmit) {\r\n                    this.onUpdateItem();\r\n                }\r\n            }}\r\n            maxWidth=\"sm\"\r\n            fullWidth\r\n        >\r\n            <IconButton\r\n                onClick={() => this.onDialogClose()}\r\n                className={this.props.classes.closeButton}\r\n            >\r\n                <CloseIcon />\r\n            </IconButton>\r\n            <DialogTitle>\r\n                {I18n.t(`${this.state.duplicate ? 'Duplicate' : (this.state.isNew ? 'Add' : 'Edit')} ${this.state.dialogElementType === 'folder' ? 'folder' : 'profile'}`)}\r\n            </DialogTitle>\r\n            <DialogContent>\r\n                <TextField\r\n                    autoFocus\r\n                    fullWidth\r\n                    error={!canSubmit}\r\n                    helperText={canSubmit ? '' : I18n.t('Name is not unique')}\r\n                    label={I18n.t('Name')}\r\n                    value={this.state.dialogElementTitle}\r\n                    onChange={evt => this.setState({ dialogElementTitle: evt.target.value })}\r\n                    InputProps={{\r\n                        startAdornment:\r\n                            <InputAdornment position=\"start\">\r\n                                <EditIcon />\r\n                            </InputAdornment>,\r\n                    }}\r\n                />\r\n            </DialogContent>\r\n            <DialogActions>\r\n                {\r\n                    !this.state.isNew && <Button style={{ color: '#FF8080' }} onClick={this.onDeleteItem} variant=\"outlined\" startIcon={<DeleteIcon />}>\r\n                        {I18n.t('Delete')}\r\n                    </Button>\r\n                }\r\n                <Button\r\n                    disabled={!canSubmit}\r\n                    onClick={this.onUpdateItem}\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    startIcon={<CheckIcon />}\r\n                >\r\n                    {\r\n                        I18n.t(this.state.isNew ? 'Create' : (this.state.duplicate ? 'Copy' : 'Update'))\r\n                    }\r\n                </Button>\r\n                <Button\r\n                    onClick={() => this.onDialogClose()}\r\n                    variant=\"contained\"\r\n                    startIcon={<CloseIcon />}\r\n                >\r\n                    {I18n.t('Cancel')}\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>;\r\n    }\r\n\r\n    render() {\r\n        const { profiles } = this.props;\r\n        const searchText = ((this.state.isSearch && this.state.searchText) || '').toLowerCase();\r\n\r\n        const items = (\r\n            searchText ? profiles.filter(e => !searchText || (e.title && e.title.toLowerCase().includes(searchText)))\r\n                : profiles.filter(e => e.parent === '')\r\n        )\r\n            .sort(sortItems)\r\n            .map(e => (e.type === 'folder' ? this.folder(e, 0, searchText) : this.profile(e, 0, searchText)));\r\n\r\n        return <DndProvider backend={this.isTouchDevice ? TouchBackend : HTML5Backend}>\r\n            <DndPreview />\r\n            <div className={this.props.classes.scrolledAuto}>\r\n                <Paper className={this.props.classes.head}>\r\n                    {this.head()}\r\n                </Paper>\r\n                <Divider />\r\n                <MenuList>\r\n                    {items}\r\n                </MenuList>\r\n\r\n                {this.renderEditDeleteDialog()}\r\n            </div>\r\n        </DndProvider>;\r\n    }\r\n}\r\n\r\nProfilesPanel.propTypes = {\r\n    active: PropTypes.any,\r\n    profiles: PropTypes.array,\r\n    onSelectProfile: PropTypes.func,\r\n    onChangeProfiles: PropTypes.func,\r\n    classes: PropTypes.object,\r\n};\r\n\r\nexport default withStyles(styles)(ProfilesPanel);\r\n","import PropTypes from 'prop-types';\r\nimport React, { Component } from 'react';\r\n\r\nimport {\r\n    TextField, withStyles, FormLabel, IconButton,\r\n} from '@material-ui/core';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport DialogSelectID from '@iobroker/adapter-react/Dialogs/SelectID';\r\n\r\nconst styles = {\r\n    tapperTitle: {\r\n        fontSize: '1.3rem',\r\n        textTransform: 'uppercase',\r\n        paddingBottom: '1rem',\r\n    },\r\n};\r\n\r\nclass StatePanel extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            showSelectId: false,\r\n        };\r\n    }\r\n\r\n    stateChange = state => {\r\n        if (state === this.props.possibleStateId) {\r\n            this.props.onChange(true);\r\n        } else {\r\n            this.props.onChange(state);\r\n        }\r\n    }\r\n\r\n    renderSelectIdDialog() {\r\n        if (this.state.showSelectId) {\r\n            return <DialogSelectID\r\n                key=\"tableSelect\"\r\n                imagePrefix=\"../..\"\r\n                filterFunc={obj => obj?.common?.type === 'boolean'}\r\n                dialogName={this.props.adapterName}\r\n                themeType={this.props.themeType}\r\n                socket={this.props.socket}\r\n                // statesOnly\r\n                onClose={() => this.setState({ showSelectId: false })}\r\n                onOk={selected => {\r\n                    const id = selected;\r\n                    this.setState({ showSelectId: false }, () => this.stateChange(id));\r\n                }}\r\n            />;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    render() {\r\n        const title = this.props.title ? this.props.title : 'Activation state';\r\n\r\n        return <>\r\n            {this.renderSelectIdDialog()}\r\n            <FormLabel component=\"legend\" className={this.props.classes.tapperTitle}>\r\n                {I18n.t(title)}\r\n            </FormLabel>\r\n            <div\r\n                style={{ display: 'flex', flexDirection: 'row' }}\r\n                title={I18n.t('You can provide here the state that controls the activation of this profile')}\r\n            >\r\n                <TextField\r\n                    style={{ flex: 1 }}\r\n                    readOnly\r\n                    value={this.props.value === true ? this.props.possibleStateId : this.props.value || ''}\r\n                    onClick={() => this.setState({ showSelectId: true })}\r\n                    helperText={`(${I18n.t('optional')})`}\r\n                />\r\n                {this.props.value !== true ? <IconButton onClick={() => this.stateChange(true)}>\r\n                    <ClearIcon />\r\n                </IconButton> : null}\r\n            </div>\r\n        </>;\r\n    }\r\n}\r\n\r\nStatePanel.propTypes = {\r\n    value: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\r\n    onChange: PropTypes.func,\r\n    title: PropTypes.string,\r\n    socket: PropTypes.object,\r\n    possibleStateId: PropTypes.string,\r\n};\r\nexport default withStyles(styles)(StatePanel);\r\n","import React from 'react';\r\nimport './App.scss';\r\nimport { withStyles, MuiThemeProvider } from '@material-ui/core/styles';\r\n\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport GenericApp from '@iobroker/adapter-react/GenericApp';\r\nimport Loader from '@iobroker/adapter-react/Components/Loader';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport { Drawer, Grid, IconButton } from '@material-ui/core';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\n\r\n// import defaultOptions from './data/defaultOptions.json'\r\n\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport DehazeIcon from '@material-ui/icons/Dehaze';\r\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\r\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\r\nimport AssignmentTurnedInIcon from '@material-ui/icons/AssignmentTurnedIn';\r\nimport CalendarTodayIcon from '@material-ui/icons/CalendarToday';\r\nimport CallSplitIcon from '@material-ui/icons/CallSplit';\r\nimport ViewListIcon from '@material-ui/icons/ViewList';\r\n// import ScheduleIcon from '@material-ui/icons/Schedule';\r\nimport AccountTreeIcon from '@material-ui/icons/AccountTree';\r\nimport minmax from './data/minmax.json';\r\nimport DevicesPanel from './components/DevicesPanel';\r\nimport DayOfWeekPanel from './components/DayOfWeekPanel';\r\nimport IntervalsContainer from './components/IntervalsContainer';\r\nimport PriorityPanel from './components/PriorityPanel';\r\nimport TypePanel from './components/TypePanel';\r\nimport ProfilesPanel from './components/ProfilesPanel';\r\nimport StatePanel from './components/StatePanel';\r\n\r\nconst styles = theme => {\r\n    const mobilePanel = {\r\n    };\r\n    const leftRSM = {\r\n        position: 'absolute',\r\n        zIndex: 2000,\r\n        color: '#FF0000',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        top: 10,\r\n        left: 7,\r\n        transition: 'all 300ms ease-out',\r\n        '&.active':\r\n        {\r\n            color: '#FFF',\r\n        },\r\n    };\r\n    return {\r\n        app: {\r\n            display: 'flex',\r\n            position: 'relative',\r\n            height: 'calc(100% - 64px)',\r\n            backgroundColor: theme.palette.background.paper,\r\n        },\r\n        mobileScrolled:\r\n        {\r\n            overflowY: 'auto',\r\n        },\r\n        drawer: {\r\n            display: 'flex',\r\n            flexGrow: 0,\r\n            maxWidth: 330,\r\n            width: 330,\r\n            flexBasis: 330,\r\n            transition: 'width 300ms ease-in',\r\n        },\r\n        drawerPaper: {\r\n            height: 'calc(100% - 64px)',\r\n        },\r\n        drGrid: {\r\n            width: 330,\r\n            transition: 'width 300ms ease-in',\r\n        },\r\n        drawerClose: {\r\n            width: 40,\r\n            maxWidth: 40,\r\n            flexBasis: 40,\r\n            transition: 'width 300ms ease-in',\r\n        },\r\n        drGridClose: {\r\n            transition: 'width 300ms ease-in',\r\n        },\r\n        tapperGrid: {\r\n            margin: 0,\r\n            boxShadow: 'none',\r\n            borderRadius: 0,\r\n            alignItems: 'center',\r\n            padding: 10,\r\n            '@media (max-width:570px)':\r\n            {\r\n                margin: 0,\r\n                boxShadow: 'none',\r\n                borderRadius: 0,\r\n                alignItems: 'center',\r\n                padding: '0px 10px 0 60px',\r\n            },\r\n        },\r\n        flowDark: {\r\n            width: 26,\r\n            height: 28,\r\n            maxHeight: 28,\r\n            minHeight: 28,\r\n            padding: 0,\r\n            display: 'flex',\r\n            justifyContent: 'center',\r\n            alignItems: 'center',\r\n            cursor: 'pointer',\r\n            position: 'relative',\r\n            '&::before':\r\n            {\r\n                content: '',\r\n                position: 'absolute',\r\n                top: '50%',\r\n                left: '50%',\r\n                marginLeft: 0,\r\n                marginTop: 0,\r\n                width: 0,\r\n                height: 0,\r\n                transition: 'all 200ms ease-out',\r\n                opacity: 0,\r\n            },\r\n        },\r\n        closeLabelLeftSm:\r\n        {\r\n            display: 'none',\r\n            '@media (max-width:570px)':\r\n            {\r\n                height: 60,\r\n                display: 'flex',\r\n                justifyContent: 'center',\r\n                alignItems: 'center',\r\n            },\r\n        },\r\n        labelLeftSm1:\r\n        {\r\n            display: 'none',\r\n            '@media (max-width:570px)':\r\n            {\r\n                ...leftRSM,\r\n            },\r\n        },\r\n        labelLeftSm2:\r\n        {\r\n            display: 'none',\r\n            '@media (max-width:570px)':\r\n            {\r\n                ...leftRSM,\r\n                top: 'auto',\r\n                bottom: 60,\r\n            },\r\n        },\r\n        labelRightSm3:\r\n        {\r\n            display: 'none',\r\n            '@media (max-width:570px)':\r\n            {\r\n                ...leftRSM,\r\n                top: 60,\r\n            },\r\n        },\r\n        labelRightSm4:\r\n        {\r\n            display: 'none',\r\n            '@media (max-width:570px)':\r\n            {\r\n                ...leftRSM,\r\n                top: 'auto',\r\n                bottom: 11,\r\n            },\r\n        },\r\n        labelRightSm5:\r\n        {\r\n            display: 'none',\r\n            '@media (max-width:570px)':\r\n            {\r\n                ...leftRSM,\r\n                top: 110,\r\n            },\r\n        },\r\n        labelRightSm6:\r\n        {\r\n            display: 'none',\r\n            '@media (max-width:570px)':\r\n            {\r\n                ...leftRSM,\r\n                top: 'auto',\r\n                bottom: 10,\r\n            },\r\n        },\r\n        labelRightSm7:\r\n        {\r\n            display: 'none',\r\n            '@media (max-width:570px)':\r\n            {\r\n                ...leftRSM,\r\n                top: 'auto',\r\n                bottom: 60,\r\n            },\r\n        },\r\n        labelRightSm8:\r\n        {\r\n            display: 'none',\r\n            '@media (max-width:570px)':\r\n            {\r\n                ...leftRSM,\r\n                top: 160,\r\n            },\r\n        },\r\n        labelMenu:\r\n        {\r\n            display: 'none',\r\n            '@media (max-width:570px)':\r\n            {\r\n\r\n            },\r\n        },\r\n        labelNenuBottom:\r\n        {\r\n            display: 'none',\r\n            '@media (max-width:570px)':\r\n            {\r\n\r\n            },\r\n        },\r\n        labelMenuBottom:\r\n        {\r\n            display: 'none',\r\n            '@media (max-width:768px)':\r\n            {\r\n                top: 'auto',\r\n                bottom: -75,\r\n                transform: 'skewY(11deg)',\r\n                height: 290,\r\n            },\r\n\r\n        },\r\n        root: {},\r\n        tabContent: {\r\n            padding: 10,\r\n            height: 'calc(100% - 64px - 48px - 20px)',\r\n            overflow: 'auto',\r\n        },\r\n        tabContentIFrame: {\r\n            padding: 10,\r\n            height: 'calc(100% - 64px - 48px - 20px - 38px)',\r\n            overflow: 'auto',\r\n        },\r\n        paneling: {\r\n            backgroundColor: theme.palette.background.paper,\r\n        },\r\n        mobilePanel,\r\n        slidersContainer: {\r\n            width: '100%',\r\n            height: '100%',\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n        },\r\n        emptyProfile: {\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            width: '100%',\r\n            color: theme.palette.text.primary,\r\n        },\r\n\r\n    };\r\n};\r\n\r\nconst AntTabs = withStyles({\r\n    root: {\r\n        margin: 0,\r\n        width: '100%',\r\n        justifyContent: 'center',\r\n    },\r\n    indicator: {\r\n        transition: 'all 300ms ease-out',\r\n    },\r\n})(Tabs);\r\n\r\nconst AntTab = withStyles(() => ({\r\n    root: {\r\n        // backgroundColor:'#444',\r\n        minWidth: 140,\r\n        fontWeight: 700,\r\n        fontSize: '0.75rem',\r\n        opacity: 1,\r\n    },\r\n    selected: {},\r\n}))(props => <Tab {...props} />);\r\n\r\nclass App extends GenericApp {\r\n    constructor(props) {\r\n        const extendedProps = { ...props };\r\n        extendedProps.translations = {\r\n            en: require('./i18n/en'),\r\n            de: require('./i18n/de'),\r\n            ru: require('./i18n/ru'),\r\n            pt: require('./i18n/pt'),\r\n            nl: require('./i18n/nl'),\r\n            fr: require('./i18n/fr'),\r\n            it: require('./i18n/it'),\r\n            es: require('./i18n/es'),\r\n            pl: require('./i18n/pl'),\r\n            'zh-cn': require('./i18n/zh-cn'),\r\n        };\r\n\r\n        extendedProps.sentryDSN = window.sentryDSN;\r\n\r\n        super(props, extendedProps);\r\n\r\n        this.state = {\r\n            ...this.state,\r\n            isDrawOpen: window.localStorage.getItem('iobroker.scheduler.isDrawOpen') === null ? true\r\n                : JSON.parse(window.localStorage.getItem('iobroker.scheduler.isDrawOpen')),\r\n            activeProfile: window.localStorage.getItem('iobroker.scheduler.activeProfile') || -1,\r\n            isExpert: true,\r\n            leftOpen: 0,\r\n            devicesCache: {},\r\n        };\r\n\r\n        // icon cache\r\n        this.icons = {};\r\n    }\r\n\r\n    componentDidMount() {\r\n        window.addEventListener('resize', this.updateWindowDimensions);\r\n        this.updateWindowDimensions();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('resize', this.updateWindowDimensions);\r\n    }\r\n\r\n    updateWindowDimensions = () => {\r\n        this.setState({\r\n            windowWidth: window.innerWidth - Math.random(),\r\n            windowHeight: window.innerHeight,\r\n        });\r\n    }\r\n\r\n    onLeftOpen = panelIndex => {\r\n        this.setState({\r\n            leftOpen: this.state.leftOpen === panelIndex ? 0 : panelIndex,\r\n        });\r\n    }\r\n\r\n    onDrawerHandler = () => {\r\n        window.localStorage.setItem('iobroker.scheduler.isDrawOpen', !this.state.isDrawOpen);\r\n        this.setState({\r\n            isDrawOpen: !this.state.isDrawOpen,\r\n        });\r\n        setTimeout(() => this.updateWindowDimensions(), 200);\r\n    }\r\n\r\n    currentProfile = () => {\r\n        const foundProfile = this.state.native.profiles.find(profile => profile.id === this.state.activeProfile);\r\n        return foundProfile ? foundProfile.type === 'profile' && foundProfile.data : null;\r\n    }\r\n\r\n    changeProfile = newData => {\r\n        const profiles = JSON.parse(JSON.stringify(this.state.native.profiles));\r\n        const profileIndex = this.state.native.profiles.findIndex(\r\n            profile => profile.id === this.state.activeProfile,\r\n        );\r\n        profiles[profileIndex].data = newData;\r\n        this.fullUpdateNativeValue('profiles', profiles);\r\n    }\r\n\r\n    onType = type => {\r\n        const profile = JSON.parse(JSON.stringify(this.currentProfile()));\r\n        profile.type = type;\r\n        if (type !== this.currentProfile().type) {\r\n            const oldMax = minmax[this.currentProfile().type].max;\r\n            const newMax = minmax[type].max;\r\n\r\n            profile.intervals = profile.intervals.map(interval => {\r\n                const normalizedInterval = Math.round((newMax / oldMax) * interval);\r\n                if (normalizedInterval < minmax[type].min) {\r\n                    return minmax[type].min;\r\n                }\r\n                if (normalizedInterval > minmax[type].max) {\r\n                    return minmax[type].max;\r\n                }\r\n                return normalizedInterval;\r\n            });\r\n        }\r\n        this.changeProfile(profile);\r\n    }\r\n\r\n    onPriority = priority => {\r\n        const profile = JSON.parse(JSON.stringify(this.currentProfile()));\r\n        profile.prio = priority;\r\n        this.changeProfile(profile);\r\n    }\r\n\r\n    onDevices = devices => {\r\n        const profile = JSON.parse(JSON.stringify(this.currentProfile()));\r\n        profile.members = devices;\r\n        this.changeProfile(profile);\r\n    }\r\n\r\n    onState = async state => {\r\n        const currentProfile = JSON.parse(JSON.stringify(this.currentProfile()));\r\n        currentProfile.state = state;\r\n\r\n        if (currentProfile.state !== true) {\r\n            currentProfile.enabled = await this.socket.getState(state).val;\r\n        }\r\n\r\n        this.changeProfile(currentProfile);\r\n    }\r\n\r\n    async processTasks(tasks) {\r\n        for (let t = 0; t < tasks.length; t++) {\r\n            const task = tasks[t];\r\n\r\n            if (task.method === 'setObject') {\r\n                const obj = await this.socket.getObject(task.id, task.obj);\r\n                if (!obj) {\r\n                    await this.socket.setObject(task.id, task.obj);\r\n                }\r\n                const state = await this.socket.getState(task.id);\r\n                if (!state || state.val !== task.val) {\r\n                    await this.socket.setState(task.id, task.val);\r\n                }\r\n            } else if (task.method === 'setState') {\r\n                const state = await this.socket.getState(task.id);\r\n                if (!state || state.val !== task.val) {\r\n                    await this.socket.setState(task.id, task.val);\r\n                }\r\n            } else if (task.method === 'delObject') {\r\n                await this.socket.delObject(task.id);\r\n            } else if (task.method === 'rename') {\r\n                const obj = await this.socket.getObject(task.id);\r\n                await this.socket.setObject(task.newId, obj);\r\n                await this.socket.setState(task.newId, task.val);\r\n                await this.socket.delObject(task.id);\r\n            }\r\n        }\r\n    }\r\n\r\n    onPrepareSave(settings) {\r\n        const tasks = [];\r\n        settings.profiles.forEach(profile => {\r\n            if (profile.type === 'profile') {\r\n                const originalProfile = this.savedNative.profiles.find(foundProfile => foundProfile.id === profile.id);\r\n\r\n                // if new profile\r\n                if (!originalProfile && profile.data.state === true) {\r\n                    tasks.push({\r\n                        method: 'setObject',\r\n                        id: this.getStateId(profile, settings.profiles),\r\n                        val: profile.data.enabled,\r\n                        obj: {\r\n                            common: {\r\n                                type: 'boolean',\r\n                                read: true,\r\n                                write: true,\r\n                                role: 'switch',\r\n                                def: true,\r\n                                name: profile.title,\r\n                            },\r\n                            type: 'state',\r\n                        },\r\n                    });\r\n                }\r\n            }\r\n        });\r\n\r\n        this.savedNative.profiles.forEach(profile => {\r\n            if (profile.type === 'profile') {\r\n                const newProfile = settings.profiles.find(p => p.id === profile.id);\r\n\r\n                // If deleted\r\n                if (!newProfile && profile.data.state === true) {\r\n                    tasks.push({\r\n                        method: 'delObject',\r\n                        id: this.getStateId(profile, this.savedNative.profiles),\r\n                    });\r\n                } else\r\n                if (newProfile) {\r\n                    const isOldNormalId = profile.data.state === true;\r\n                    const isNewNormalId = newProfile.data.state === true;\r\n\r\n                    if (isOldNormalId !== isNewNormalId) {\r\n                        // If new has other state (old exists, new does not)\r\n                        if (isOldNormalId) {\r\n                            // delete old one\r\n                            tasks.push({\r\n                                method: 'delObject',\r\n                                id: this.getStateId(profile, this.savedNative.profiles),\r\n                            });\r\n                        } else {\r\n                            // If new has other state (old does no exist, new does)\r\n                            tasks.push({\r\n                                method: 'setObject',\r\n                                id: this.getStateId(newProfile, settings.profiles),\r\n                                val: newProfile.data.enabled,\r\n                                obj: {\r\n                                    common: {\r\n                                        type: 'boolean',\r\n                                        read: true,\r\n                                        write: true,\r\n                                        role: 'switch',\r\n                                        def: true,\r\n                                        name: newProfile.title,\r\n                                    },\r\n                                    type: 'state',\r\n                                },\r\n                            });\r\n                        }\r\n                    } else if (isOldNormalId) {\r\n                        const oldStateId = this.getStateId(profile, this.savedNative.profiles);\r\n                        const newStateId = this.getStateId(newProfile, settings.profiles);\r\n\r\n                        if (oldStateId !== newStateId) {\r\n                            tasks.push({\r\n                                method: 'rename',\r\n                                id: oldStateId,\r\n                                newId: newStateId,\r\n                                val: newProfile.data.enabled,\r\n                            });\r\n                        } else {\r\n                            tasks.push({\r\n                                method: 'setState',\r\n                                id: newStateId,\r\n                                val: newProfile.data.enabled,\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        this.processTasks(tasks)\r\n            .then(() => {\r\n                // eslint-disable-next-line\r\n                console.log('States updated');\r\n                return this.loadStates();\r\n            });\r\n\r\n        settings.profiles.forEach(profile => delete profile.data.enabled);\r\n    }\r\n\r\n    onDow = (day, enabled) => {\r\n        const profile = JSON.parse(JSON.stringify(this.currentProfile()));\r\n        if (enabled && !profile.dow.includes(day)) {\r\n            profile.dow.push(day);\r\n        } else if (!enabled && profile.dow.includes(day)) {\r\n            profile.dow.splice(profile.dow.indexOf(day), 1);\r\n        }\r\n        this.changeProfile(profile);\r\n    }\r\n\r\n    onIntervals = intervals => {\r\n        const profile = JSON.parse(JSON.stringify(this.currentProfile()));\r\n        profile.intervals = intervals;\r\n        this.changeProfile(profile);\r\n    }\r\n\r\n    onSelectProfile = active => {\r\n        this.setState({ activeProfile: active, leftOpen: false });\r\n        window.localStorage.setItem('iobroker.scheduler.activeProfile', active);\r\n    }\r\n\r\n    changeProfiles = profiles => {\r\n        this.fullUpdateNativeValue('profiles', profiles);\r\n    }\r\n\r\n    fullUpdateNativeValue(attr, value) {\r\n        const native = JSON.parse(JSON.stringify(this.state.native));\r\n        native[attr] = value;\r\n        const changed = this.getIsChanged(native);\r\n        this.setState({ native, changed });\r\n    }\r\n\r\n    onRange = (event, intervalDuration) => {\r\n        const profile = JSON.parse(JSON.stringify(this.currentProfile()));\r\n        profile.intervalDuration = intervalDuration;\r\n        if (this.currentProfile().intervalDuration < intervalDuration) {\r\n            const relation = intervalDuration / this.currentProfile().intervalDuration;\r\n            const newIntervals = [];\r\n            for (let i = 0; i < this.currentProfile().intervals.length; i += relation) {\r\n                newIntervals.push(this.currentProfile().intervals.slice(i, i + relation));\r\n            }\r\n            profile.intervals = newIntervals.map(\r\n                chunk => Math.round(chunk.reduce((a, b) => a + b, 0) / relation),\r\n            );\r\n        }\r\n        if (this.currentProfile().intervalDuration > intervalDuration) {\r\n            const relation = this.currentProfile().intervalDuration / intervalDuration;\r\n            const newIntervals = [];\r\n            let newIndex = 0;\r\n            this.currentProfile().intervals.forEach(interval => {\r\n                for (let shift = 0; shift < relation; shift++) {\r\n                    newIntervals[newIndex] = interval;\r\n                    newIndex++;\r\n                }\r\n            });\r\n            profile.intervals = newIntervals;\r\n        }\r\n        this.changeProfile(profile);\r\n        this.onLeftOpen(this.state.leftOpen);\r\n    }\r\n\r\n    async loadStates() {\r\n        const native = JSON.parse(JSON.stringify(this.state.native));\r\n        for (let p = 0; p < native.profiles.length; p++) {\r\n            const profile = native.profiles[p];\r\n            if (profile.type === 'profile') {\r\n                if (profile.data.state === true) {\r\n                    const state = await this.socket.getState(this.getStateId(profile, native.profiles));\r\n\r\n                    if (state) {\r\n                        profile.data.enabled = state.val;\r\n                    } else {\r\n                        profile.data.enabled = false;\r\n                    }\r\n                } else if (!profile.data.state) {\r\n                    profile.data.enabled = false;\r\n                } else {\r\n                    const state = await this.socket.getState(profile.data.state);\r\n                    if (state) {\r\n                        profile.data.enabled = state.val;\r\n                    } else {\r\n                        profile.data.enabled = false;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.setState({ native });\r\n        this.savedNative = JSON.parse(JSON.stringify(native));\r\n    }\r\n\r\n    onConnectionReady() {\r\n        if (!this.state.native.profiles) {\r\n            const native = {\r\n                profiles: [],\r\n            };\r\n            this.setState({ native });\r\n            this.savedNative = native;\r\n        } else {\r\n            this.loadStates();\r\n        }\r\n    }\r\n\r\n    renderProfile() {\r\n        const { activeProfile } = this.state;\r\n        const { profiles } = this.state.native;\r\n\r\n        return <ProfilesPanel\r\n            active={activeProfile}\r\n            profiles={profiles}\r\n            onSelectProfile={this.onSelectProfile}\r\n            onChangeProfiles={this.changeProfiles}\r\n            theme={this.props.theme}\r\n            instance={this.instance}\r\n        />;\r\n    }\r\n\r\n    renderRange() {\r\n        const profile = this.currentProfile();\r\n\r\n        return <div className=\"mt-sm-auto mb-sm-auto w-100\">\r\n            <AntTabs\r\n                value={profile.intervalDuration}\r\n                onChange={this.onRange}\r\n                orientation={this.state.windowWidth < 768 ? 'vertical' : 'horizontal'}\r\n                indicatorColor=\"primary\"\r\n                textColor=\"primary\"\r\n                centered\r\n            >\r\n                {\r\n                    [0.5, 1, 2, 3, 4].map(\r\n                        duration => <AntTab key={duration} value={duration} label={`${duration} ${I18n.t('hr')}`} />,\r\n                    )\r\n                }\r\n            </AntTabs>\r\n        </div>;\r\n    }\r\n\r\n    renderType() {\r\n        return <div className=\"mt-sm-auto mb-sm-auto\">\r\n            <div>\r\n                <TypePanel\r\n                    onChange={this.onType}\r\n                    type={this.currentProfile().type}\r\n                />\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    renderDow() {\r\n        return <div className=\"mt-sm-auto mb-sm-auto\">\r\n            <DayOfWeekPanel\r\n                firstDayOfWeek={this.socket.systemConfig.common.firstDayOfWeek || 'monday'}\r\n                dow={this.currentProfile().dow}\r\n                onChange={this.onDow}\r\n                theme={this.state.theme}\r\n            />\r\n        </div>;\r\n    }\r\n\r\n    renderPriority() {\r\n        return <div className=\"mt-sm-auto mb-sm-auto\">\r\n            <div>\r\n                <PriorityPanel\r\n                    profile={this.currentProfile()}\r\n                    onChange={this.onPriority}\r\n                    priority={this.currentProfile().prio}\r\n                    windowWidth={this.state.windowWidth}\r\n                />\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    renderDevices() {\r\n        return <div className=\"mt-sm-auto mb-sm-auto wc-100\">\r\n            <DevicesPanel\r\n                members={this.currentProfile().members}\r\n                onChange={this.onDevices}\r\n                title=\"Devices\"\r\n                isExpert={this.state.isExpert}\r\n                rows={1}\r\n                socket={this.socket}\r\n                windowWidth={this.state.windowWidth}\r\n                devicesCache={this.state.devicesCache}\r\n                type={this.currentProfile().type}\r\n                prio={this.currentProfile().prio}\r\n                profiles={this.state.native.profiles}\r\n                icons={this.icons}\r\n            />\r\n        </div>;\r\n    }\r\n\r\n    renderState() {\r\n        const activeProfile = this.state.native.profiles.find(item => item.id === this.state.activeProfile);\r\n\r\n        return <div className=\"mt-sm-auto mb-sm-auto wc-100\">\r\n            <StatePanel\r\n                value={activeProfile.data.state}\r\n                possibleStateId={this.getStateId(activeProfile, this.state.native.profiles)}\r\n                onChange={this.onState}\r\n                socket={this.socket}\r\n            />\r\n        </div>;\r\n    }\r\n\r\n    renderDrawer() {\r\n        if (this.state.windowWidth >= 768) {\r\n            return null;\r\n        }\r\n        let content = null;\r\n        if (this.state.leftOpen === 1) {\r\n            content = this.renderProfile();\r\n        } else if (this.state.leftOpen === 2) {\r\n            content = this.renderType();\r\n        } else if (this.state.leftOpen === 3) {\r\n            content = this.renderDow();\r\n        } else if (this.state.leftOpen === 4) {\r\n            content = this.renderPriority();\r\n        } else if (this.state.leftOpen === 5) {\r\n            content = this.renderDevices();\r\n        } else if (this.state.leftOpen === 7) {\r\n            content = this.renderRange();\r\n        } else if (this.state.leftOpen === 8) {\r\n            content = this.renderState();\r\n        }\r\n\r\n        return <Drawer\r\n            anchor=\"left\"\r\n            PaperProps={{\r\n                style: { width: '100%' },\r\n            }}\r\n            open={!!content && !!this.state.leftOpen}\r\n        >\r\n            <div\r\n                className={\r\n                    `${this.props.classes.tapperGrid\r\n                    } h-100 m-1 p-2 ${this.props.classes.mobilePanel} active`\r\n                }\r\n            >\r\n                <div\r\n                    className={`${this.props.classes.flowDark} ${this.props.classes.closeLabelLeftSm}`}\r\n                    onClick={() => this.onLeftOpen(this.state.leftOpen)}\r\n                >\r\n                    <ClearIcon />\r\n                </div>\r\n                {content}\r\n            </div>\r\n        </Drawer>;\r\n    }\r\n\r\n    static getParentId(id) {\r\n        const pos = id.lastIndexOf('.');\r\n        if (pos !== -1) {\r\n            return id.substring(0, pos);\r\n        }\r\n\r\n        return id;\r\n    }\r\n\r\n    async getObjectSafe(id) {\r\n        let obj;\r\n        try {\r\n            obj = (await this.socket.getObject(id)) || false;\r\n            if (obj && obj.native) {\r\n                delete obj.native;\r\n            }\r\n        } catch (e) {\r\n            // console.error('Cannot read object ' + id);\r\n        }\r\n        return obj;\r\n    }\r\n\r\n    async updateDevices(devices) {\r\n        const devicesCache = JSON.parse(JSON.stringify(this.state.devicesCache));\r\n\r\n        let changed = false;\r\n\r\n        for (let d = 0; d < devices.length; d++) {\r\n            const id = devices[d];\r\n            if (!this.state.devicesCache[id] && this.state.devicesCache[id] !== false) {\r\n                // eslint-disable-next-line\r\n                const obj = await this.getObjectSafe(id);\r\n\r\n                if (!devicesCache[id] || JSON.stringify(obj) !== JSON.stringify(devicesCache[id])) {\r\n                    devicesCache[id] = obj || false;\r\n                    changed = obj;\r\n\r\n                    // find icon\r\n                    let icon = Utils.getObjectIcon(id, devicesCache[id]);\r\n                    if (!icon) {\r\n                        let parentId = App.getParentId(id);\r\n                        if (!devicesCache[parentId] && devicesCache[parentId] !== false) {\r\n                            // eslint-disable-next-line\r\n                            devicesCache[parentId] = await this.getObjectSafe(parentId);\r\n                        }\r\n\r\n                        if (devicesCache[parentId] && devicesCache[parentId].type === 'channel') {\r\n                            icon = Utils.getObjectIcon(parentId, devicesCache[parentId]);\r\n                            if (!icon) {\r\n                                parentId = App.getParentId(parentId);\r\n                                if (!devicesCache[parentId] && devicesCache[parentId] !== false) {\r\n                                    // eslint-disable-next-line\r\n                                    devicesCache[parentId] = await this.getObjectSafe(parentId);\r\n                                }\r\n                                if (devicesCache[parentId] && devicesCache[parentId].type === 'device') {\r\n                                    icon = Utils.getObjectIcon(parentId, devicesCache[parentId]);\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    if (icon) {\r\n                        this.icons[id] = icon;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        if (changed) {\r\n            this.setState({ devicesCache });\r\n        }\r\n    }\r\n\r\n    checkDevices() {\r\n        const devices = [];\r\n        this.state.native.profiles.forEach(profile => {\r\n            if (profile.data && profile.data.members) {\r\n                profile.data.members.forEach(device => {\r\n                    if (!devices.includes(device)) {\r\n                        devices.push(device);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n\r\n        devices.sort();\r\n        const newLastDevices = JSON.stringify(devices);\r\n        if (!this.lastDevices || newLastDevices !== this.lastDevices) {\r\n            this.lastDevices = newLastDevices;\r\n            setTimeout(() => this.updateDevices(devices), 300);\r\n        }\r\n    }\r\n\r\n    getStateId(profile, profiles, _list) {\r\n        _list = _list || [];\r\n        _list.unshift(profile.title.replace(Utils.FORBIDDEN_CHARS, '_').replace(/\\./g, '_'));\r\n        if (profile.parent) {\r\n            // find parent profile\r\n            const parentProfile = profiles.find(item => item.id === profile.parent);\r\n            if (parentProfile) {\r\n                return this.getStateId(parentProfile, profiles, _list);\r\n            }\r\n            // eslint-disable-next-line\r\n            console.error('Cannot find parent ' + profile.parent);\r\n            return null;\r\n        }\r\n\r\n        return `scheduler.${this.instance}.${_list.join('.')}`;\r\n    }\r\n\r\n    render() {\r\n        if (!this.state.loaded || !this.state.native.profiles) {\r\n            return <MuiThemeProvider theme={this.state.theme}>\r\n                <Loader theme={this.state.themeType} />\r\n            </MuiThemeProvider>;\r\n        }\r\n\r\n        this.checkDevices();\r\n\r\n        const { classes } = this.props;\r\n        const profile = this.currentProfile();\r\n\r\n        const profileGrid = <div className={`${classes.tapperGrid} ${classes.paneling} h-100 m-0`}>\r\n            {this.renderProfile()}\r\n        </div>;\r\n\r\n        const profilePanel = this.state.windowWidth < 768\r\n            ? null\r\n            : <Drawer\r\n                variant=\"persistent\"\r\n                anchor=\"left\"\r\n                open={this.state.isDrawOpen}\r\n                classes={{\r\n                    root: this.state.isDrawOpen ? classes.drawer : classes.drawerClose,\r\n                    paper: classes.drawerPaper,\r\n                }}\r\n            >\r\n                <div\r\n                    className={this.state.isDrawOpen ? classes.drGrid : classes.drGridClose}\r\n                >\r\n                    <div className=\"absolute-right p-1\">\r\n                        <IconButton\r\n                            component=\"span\"\r\n                            size=\"small\"\r\n                            title={I18n.t('finish searching')}\r\n                            onClick={this.onDrawerHandler}\r\n                        >\r\n                            {\r\n                                this.state.isDrawOpen\r\n                                    ? <ChevronLeftIcon className=\"ml-auto\" />\r\n                                    : <ChevronRightIcon className=\"ml-auto\" />\r\n                            }\r\n                        </IconButton>\r\n                    </div>\r\n                    {profileGrid}\r\n                </div>\r\n            </Drawer>;\r\n\r\n        return <MuiThemeProvider theme={this.state.theme}>\r\n            <div className={classes.app}>\r\n                {profilePanel}\r\n                <div\r\n                    className={`${classes.labelLeftSm1} ${this.state.leftOpen === 1 ? 'active' : ''}`}\r\n                    onClick={() => this.onLeftOpen(1)}\r\n                >\r\n                    <Fab\r\n                        size=\"small\"\r\n                        color={this.state.leftOpen === 1 ? 'secondary' : 'primary'}\r\n                        aria-label=\"add\"\r\n                    >\r\n                        <DehazeIcon />\r\n                    </Fab>\r\n                </div>\r\n                {this.renderDrawer()}\r\n                <Grid\r\n                    container\r\n                    spacing={0}\r\n                    style={{ background: this.state.theme.palette.background.paper }}\r\n                    className={classes.mobileScrolled}\r\n                >\r\n                    {\r\n                        this.currentProfile()\r\n                            ? <>\r\n                                <Grid item xs={12} lg={11} className={this.props.classes.slidersContainer}>\r\n                                    <IntervalsContainer\r\n                                        type={this.currentProfile().type}\r\n                                        intervals={this.currentProfile().intervals}\r\n                                        onChange={this.onIntervals}\r\n                                        theme={this.state.theme}\r\n                                        range={profile.intervalDuration}\r\n                                        windowWidth={this.state.windowWidth}\r\n                                    />\r\n                                    {\r\n                                        this.state.isExpert\r\n                                            ? <div className={`${classes.tapperGrid} m-1 mt-1`}>\r\n                                                {this.state.windowWidth > 768 ? this.renderRange() : null}\r\n                                            </div>\r\n                                            : null\r\n                                    }\r\n                                    <Grid\r\n                                        container\r\n                                        spacing={0}\r\n                                    >\r\n                                        <Grid\r\n                                            item\r\n                                            xs={12}\r\n                                            lg={6}\r\n                                            className=\"h-100 expert sm-hidden\"\r\n                                        >\r\n                                            <div\r\n                                                className={`${classes.tapperGrid} m-1 p-2 mt-1`}\r\n                                                style={{ flexGrow: 100 }}\r\n                                            >\r\n                                                {this.state.windowWidth > 768 ? this.renderDevices() : null}\r\n                                            </div>\r\n                                        </Grid>\r\n                                        {\r\n                                            this.state.isExpert\r\n                                                ? <>\r\n                                                    <Grid\r\n                                                        item\r\n                                                        xs={12}\r\n                                                        lg={1}\r\n                                                        className=\"h-100 expert sm-hidden\"\r\n                                                    >\r\n                                                        <div className={`${classes.tapperGrid} h-100 m-1 p-2`}>\r\n                                                            {this.state.windowWidth > 768 ? this.renderPriority() : null}\r\n                                                        </div>\r\n                                                    </Grid>\r\n                                                    <Grid\r\n                                                        item\r\n                                                        xs={12}\r\n                                                        lg={2}\r\n                                                        className=\"h-100 expert sm-hidden\"\r\n                                                    >\r\n                                                        <div\r\n                                                            className={`${classes.tapperGrid} h-100 m-1 p-2`}\r\n                                                        >\r\n                                                            {this.state.windowWidth > 768 ? this.renderType() : null}\r\n                                                        </div>\r\n                                                    </Grid>\r\n                                                    <Grid\r\n                                                        item\r\n                                                        xs={12}\r\n                                                        lg={3}\r\n                                                        className=\"h-100 expert sm-hidden\"\r\n                                                    >\r\n                                                        <div\r\n                                                            className={`${classes.tapperGrid} h-100 m-1 p-2`}\r\n                                                        >\r\n                                                            {this.state.windowWidth > 768 ? this.renderState() : null}\r\n                                                        </div>\r\n                                                    </Grid>\r\n                                                </>\r\n                                                : null\r\n                                        }\r\n                                    </Grid>\r\n                                </Grid>\r\n                                <Grid\r\n                                    item\r\n                                    xs={12}\r\n                                    lg={1}\r\n                                    className=\"h-100  sm-hidden\"\r\n                                >\r\n                                    <div className={`${classes.tapperGrid} m-1 p-2 h-100`}>\r\n                                        {this.state.windowWidth > 768 ? this.renderDow() : null}\r\n                                    </div>\r\n                                </Grid>\r\n\r\n                                <div className={classes.labelMenuBottom} />\r\n\r\n                                <div className={`${classes.labelRightSm5} ${this.state.leftOpen === 5 ? 'active' : ''}`} onClick={() => this.onLeftOpen(5)}>\r\n                                    <Fab\r\n                                        size=\"small\"\r\n                                        color={this.state.leftOpen === 5 ? 'secondary' : 'primary'}\r\n                                        aria-label=\"split\"\r\n                                    >\r\n                                        <CallSplitIcon />\r\n                                    </Fab>\r\n                                </div>\r\n                                <div className={`${classes.labelRightSm3} ${this.state.leftOpen === 3 ? 'active' : ''}`} onClick={() => this.onLeftOpen(3)}>\r\n                                    <Fab\r\n                                        size=\"small\"\r\n                                        color={this.state.leftOpen === 3 ? 'secondary' : 'primary'}\r\n                                        aria-label=\"calendar\"\r\n                                    >\r\n                                        <CalendarTodayIcon />\r\n                                    </Fab>\r\n                                </div>\r\n                                {\r\n                                    this.state.isExpert\r\n                                        ? <>\r\n                                            <div className={classes.labelMenuBottom} />\r\n                                            <div className={`${classes.labelLeftSm2} expert ${this.state.leftOpen === 2 ? 'active' : ''}`} onClick={() => this.onLeftOpen(2)}>\r\n                                                <Fab\r\n                                                    size=\"small\"\r\n                                                    color={this.state.leftOpen === 2 ? 'secondary' : 'primary'}\r\n                                                    aria-label=\"assignment\"\r\n                                                >\r\n                                                    <AssignmentTurnedInIcon />\r\n                                                </Fab>\r\n                                            </div>\r\n                                            <div className={`${classes.labelRightSm6} ${this.state.leftOpen === 4 ? 'active' : ''}`} onClick={() => this.onLeftOpen(4)}>\r\n                                                <Fab\r\n                                                    size=\"small\"\r\n                                                    color={this.state.leftOpen === 4 ? 'secondary' : 'primary'}\r\n                                                    aria-label=\"view\"\r\n                                                >\r\n                                                    <ViewListIcon />\r\n                                                </Fab>\r\n                                            </div>\r\n                                            {/* <div className={`${classes.labelRightSm4} ${this.state.leftOpen === 7 ? 'active' : ''}`} onClick={() => this.onLeftOpen(7)}>\r\n                                                <Fab\r\n                                                    size=\"small\"\r\n                                                    color={this.state.leftOpen === 7 ? 'secondary' : 'primary'}\r\n                                                    aria-label=\"scheduler\"\r\n                                                >\r\n                                                    <ScheduleIcon />\r\n                                                </Fab>\r\n                                            </div> */}\r\n                                            <div className={`${classes.labelRightSm8} ${this.state.leftOpen === 8 ? 'active' : ''}`} onClick={() => this.onLeftOpen(8)}>\r\n                                                <Fab\r\n                                                    size=\"small\"\r\n                                                    color={this.state.leftOpen === 8 ? 'secondary' : 'primary'}\r\n                                                    aria-label=\"scheduler\"\r\n                                                >\r\n                                                    <AccountTreeIcon />\r\n                                                </Fab>\r\n                                            </div>\r\n                                        </>\r\n                                        : null\r\n                                }\r\n                            </>\r\n                            : <div className={classes.emptyProfile}>\r\n                                {I18n.t('Select or create profile in left menu')}\r\n                            </div>\r\n                    }\r\n\r\n                    <div className=\"absolute-left p-1\">\r\n                        <IconButton\r\n                            component=\"span\"\r\n                            size=\"small\"\r\n                            title={I18n.t('finish searching')}\r\n                            onClick={this.onDrawerHandler}\r\n                        >\r\n                            <DehazeIcon />\r\n                        </IconButton>\r\n                    </div>\r\n                </Grid>\r\n            </div>\r\n            {this.renderSaveCloseButtons()}\r\n        </MuiThemeProvider>;\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(App);\r\n","/* eslint-disable */\r\n// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n    window.location.hostname === 'localhost'\r\n    // [::1] is the IPv6 localhost address.\r\n    || window.location.hostname === '[::1]'\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    || window.location.hostname.match(\r\n        /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\r\n    ),\r\n);\r\n\r\nexport function register(config) {\r\n    if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n        const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n        if (publicUrl.origin !== window.location.origin) {\r\n            // Our service worker won't work if PUBLIC_URL is on a different origin\r\n            // from what our page is served on. This might happen if a CDN is used to\r\n            // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n            return;\r\n        }\r\n\r\n        window.addEventListener('load', () => {\r\n            const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n            if (isLocalhost) {\r\n                // This is running on localhost. Let's check if a service worker still exists or not.\r\n                checkValidServiceWorker(swUrl, config);\r\n\r\n                // Add some additional logging to localhost, pointing developers to the\r\n                // service worker/PWA documentation.\r\n                navigator.serviceWorker.ready.then(() => {\r\n                    console.log(\r\n                        'This web app is being served cache-first by a service '\r\n              + 'worker. To learn more, visit http://bit.ly/CRA-PWA',\r\n                    );\r\n                });\r\n            } else {\r\n                // Is not localhost. Just register service worker\r\n                registerValidSW(swUrl, config);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n    navigator.serviceWorker\r\n        .register(swUrl)\r\n        .then((registration) => {\r\n            registration.onupdatefound = () => {\r\n                const installingWorker = registration.installing;\r\n                if (installingWorker === null) {\r\n                    return;\r\n                }\r\n                installingWorker.onstatechange = () => {\r\n                    if (installingWorker.state === 'installed') {\r\n                        if (navigator.serviceWorker.controller) {\r\n                            // At this point, the updated precached content has been fetched,\r\n                            // but the previous service worker will still serve the older\r\n                            // content until all client tabs are closed.\r\n                            console.log(\r\n                                'New content is available and will be used when all '\r\n                  + 'tabs for this page are closed. See http://bit.ly/CRA-PWA.',\r\n                            );\r\n\r\n                            // Execute callback\r\n                            if (config && config.onUpdate) {\r\n                                config.onUpdate(registration);\r\n                            }\r\n                        } else {\r\n                            // At this point, everything has been precached.\r\n                            // It's the perfect time to display a\r\n                            // \"Content is cached for offline use.\" message.\r\n                            console.log('Content is cached for offline use.');\r\n\r\n                            // Execute callback\r\n                            if (config && config.onSuccess) {\r\n                                config.onSuccess(registration);\r\n                            }\r\n                        }\r\n                    }\r\n                };\r\n            };\r\n        })\r\n        .catch((error) => {\r\n            console.error('Error during service worker registration:', error);\r\n        });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n    // Check if the service worker can be found. If it can't reload the page.\r\n    fetch(swUrl)\r\n        .then((response) => {\r\n            // Ensure service worker exists, and that we really are getting a JS file.\r\n            const contentType = response.headers.get('content-type');\r\n            if (\r\n                response.status === 404\r\n        || (contentType !== null && contentType.indexOf('javascript') === -1)\r\n            ) {\r\n                // No service worker found. Probably a different app. Reload the page.\r\n                navigator.serviceWorker.ready.then((registration) => {\r\n                    registration.unregister().then(() => {\r\n                        window.location.reload();\r\n                    });\r\n                });\r\n            } else {\r\n                // Service worker found. Proceed as normal.\r\n                registerValidSW(swUrl, config);\r\n            }\r\n        })\r\n        .catch(() => {\r\n            console.log(\r\n                'No internet connection found. App is running in offline mode.',\r\n            );\r\n        });\r\n}\r\n\r\nexport function unregister() {\r\n    if ('serviceWorker' in navigator) {\r\n        navigator.serviceWorker.ready.then((registration) => {\r\n            registration.unregister();\r\n        });\r\n    }\r\n}\r\n","import Theme from '@iobroker/adapter-react/Theme';\r\n\r\nexport default type => {\r\n    const danger = '#dd5325';\r\n    const success = '#73b6a8';\r\n    const theme = { ...Theme(type) };\r\n    if (!theme) return theme;\r\n    theme.palette.text.danger = {\r\n        color: danger,\r\n    };\r\n    theme.palette.text.success = {\r\n        color: success,\r\n    };\r\n\r\n    return theme;\r\n};\r\n","/* eslint-disable */\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport * as Sentry from '@sentry/browser';\r\nimport * as SentryIntegrations from '@sentry/integrations';\r\nimport { MuiThemeProvider } from '@material-ui/core/styles';\r\nimport './index.css';\r\n// import theme from '@iobroker/adapter-react/Theme';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport { version } from '../package.json';\r\nimport theme from './theme';\r\n\r\nwindow.adapterName = 'scheduler';\r\nlet themeName = Utils.getThemeName();\r\n\r\nconsole.log(`iobroker.${window.adapterName}@${version} using theme \"${themeName}\"`);\r\n// window.sentryDSN = 'https://5ad729dbed504d15aa8bde423cae9a8e@sentry.iobroker.net/57';\r\n\r\nfunction build() {\r\n    return ReactDOM.render(\r\n        <MuiThemeProvider theme={theme(themeName)}>\r\n            <App\r\n                onThemeChange={(_theme) => {\r\n                    themeName = _theme;\r\n                    build();\r\n                }}\r\n            />\r\n        </MuiThemeProvider>,\r\n        document.getElementById('root'),\r\n    );\r\n}\r\n\r\nbuild();\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}